
  <!DOCTYPE html>
  <html lang="zh-CN"  >
  <head>
  <meta charset="utf-8">
  

  

  

  
  <title>
    数据库复习2 |
    
    Ycx&#39;Blog
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7CNoto%20Serif%20SC:400,400italic,700,700italic%7CUbuntu%20Mono:400,400italic,700,700italic&display=swap&subset=latin,latin-ext" as="style" onload="this.onload&#x3D;null;this.rel&#x3D;&#39;stylesheet&#39;">
  
<link rel="stylesheet" href="https://npm.webcache.cn/@fortawesome/fontawesome-free@6.5.1/css/regular.min.css">
<link rel="stylesheet" href="https://npm.webcache.cn/@fortawesome/fontawesome-free@6.5.1/css/solid.min.css">

  <link rel="preload" href="https://npm.webcache.cn/@fortawesome/fontawesome-free@6.5.1/css/brands.min.css" as="style" onload="this.onload&#x3D;null;this.rel&#x3D;&#39;stylesheet&#39;"><link rel="preload" href="https://npm.webcache.cn/@fortawesome/fontawesome-free@6.5.1/css/v5-font-face.min.css" as="style" onload="this.onload&#x3D;null;this.rel&#x3D;&#39;stylesheet&#39;"><link rel="preload" href="https://npm.webcache.cn/@fortawesome/fontawesome-free@6.5.1/css/v4-font-face.min.css" as="style" onload="this.onload&#x3D;null;this.rel&#x3D;&#39;stylesheet&#39;">
  
<link rel="stylesheet" href="/css/loader.css">

  <meta name="description" content="#数据库复习(算是?)2            樱春雪                     湖南大学   | 软件工程   | 22级            六.数据库定义功能21.索引查询定义 12create [unique] [cluster] index 索引名on 表名 (列名[asc|desc] [,列名 asc|desc])   unique：唯一性索引，不允许表中不同的行在索引">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库复习2">
<meta property="og:url" content="https://ycx6666.github.io/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/index.html">
<meta property="og:site_name" content="Ycx&#39;Blog">
<meta property="og:description" content="#数据库复习(算是?)2            樱春雪                     湖南大学   | 软件工程   | 22级            六.数据库定义功能21.索引查询定义 12create [unique] [cluster] index 索引名on 表名 (列名[asc|desc] [,列名 asc|desc])   unique：唯一性索引，不允许表中不同的行在索引">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ycx6666.github.io/Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/OBAinmqZMIeY3aS.png">
<meta property="og:image" content="https://ycx6666.github.io/Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/RAF6QjY3gpoyPXd.png">
<meta property="og:image" content="https://ycx6666.github.io/Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/NvYt7VwBHFJqjuG.png">
<meta property="og:image" content="https://ycx6666.github.io/Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/ivgL5HD3FR6JplY.png">
<meta property="og:image" content="https://ycx6666.github.io/Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/et3RPIDspc2g1mu.png">
<meta property="og:image" content="https://ycx6666.github.io/Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/Tw6XYeFWzxUNCEq.png">
<meta property="og:image" content="https://ycx6666.github.io/Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/hpQrRmZVwSf9g3t.png">
<meta property="og:image" content="https://ycx6666.github.io/Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/fOUxbondpJmI1Fe.png">
<meta property="og:image" content="https://ycx6666.github.io/Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/zpMLw5nOPdD7UBv.png">
<meta property="og:image" content="https://ycx6666.github.io/Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/a8DqAvzjMKwkurG.png">
<meta property="og:image" content="https://ycx6666.github.io/Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/VcMYiJgn14Z6fux.png">
<meta property="og:image" content="https://ycx6666.github.io/Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/8M2pqTyfjvOxJC5.png">
<meta property="article:published_time" content="2024-04-04T22:00:00.000Z">
<meta property="article:modified_time" content="2024-04-15T10:46:36.406Z">
<meta property="article:author" content="Ycx.Cc">
<meta property="article:tag" content="数据库">
<meta property="article:tag" content="总结">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ycx6666.github.io/Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/OBAinmqZMIeY3aS.png">
  
    <link rel="alternate" href="/atom.xml" title="Ycx'Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/images/favicon.ico">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="https://npm.webcache.cn/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="https://npm.webcache.cn/katex@0.16.9/dist/katex.min.css">

  
  
  
  
<script src="https://npm.webcache.cn/pace-js@1.2.4/pace.min.js"></script>

  
    
<link rel="stylesheet" href="https://npm.webcache.cn/wowjs@1.1.3/css/libs/animate.css">

    
<script src="https://npm.webcache.cn/wowjs@1.1.3/dist/wow.min.js"></script>

    <script>
      new WOW({
        offset: 0,
        mobile: true,
        live: false
      }).init();
    </script>
  
  
    <script src="/sw.js"></script>
  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"></head>

  <body>
    
  <div id='loader'>
    <div class="loading-left-bg"></div>
    <div class="loading-right-bg"></div>
    <div class="spinner-box">
      <div class="loading-taichi">
        <svg width="150" height="150" viewBox="0 0 1024 1024" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision">
          <path d="M303.5 432A80 80 0 0 1 291.5 592A80 80 0 0 1 303.5 432z" fill="#ff6e6b" />
          <path d="M512 65A447 447 0 0 1 512 959L512 929A417 417 0 0 0 512 95A417 417 0 0 0 512 929L512 959A447 447 0 0 1 512 65z" fill="#fd0d00" />
          <path d="M512 95A417 417 0 0 1 929 512A208.5 208.5 0 0 1 720.5 720.5L720.5 592A80 80 0 0 0 720.5 432A80 80 0 0 0 720.5 592L720.5 720.5A208.5 208.5 0 0 1 512 512A208.5 208.5 0 0 0 303.5 303.5A208.5 208.5 0 0 0 95 512A417 417 0 0 1 512 95" fill="#fd0d00" />
        </svg>
      </div>
      <div class="loading-word">少女祈祷中...</div>
    </div>
  </div>
  </div>
  <script>
    var time = null;
    const startLoading = () => {
      time = Date.now();
      document.getElementById('loader').classList.remove("loading");
    }
    const endLoading = () => {
      if (!time) {
        document.body.style.overflow = 'auto';
        document.getElementById('loader').classList.add("loading");
      } else {
        if (Date.now() - time > 500) {
          time = null;
          document.body.style.overflow = 'auto';
          document.getElementById('loader').classList.add("loading");
        } else {
          setTimeout(endLoading, 500 - (Date.now() - time));
          time = null;
        }
      }
    }
    window.addEventListener('load', endLoading);
    document.getElementById('loader').addEventListener('click', endLoading);
  </script>


    <div id="container">
      <div id="wrap">
        <div id="header-nav">
  <nav id="main-nav">
    
      <span class="main-nav-link-wrap">
        <span class="main-nav-icon"></span>
        <a class="main-nav-link" href="/">首页</a>
      </span>
    
      <span class="main-nav-link-wrap">
        <span class="main-nav-icon"></span>
        <a class="main-nav-link" href="/archives">归档</a>
      </span>
    
      <span class="main-nav-link-wrap">
        <span class="main-nav-icon"></span>
        <a class="main-nav-link" href="/about">关于</a>
      </span>
    
      <span class="main-nav-link-wrap">
        <span class="main-nav-icon"></span>
        <a class="main-nav-link" href="/friend">友链</a>
      </span>
    
    <a id="main-nav-toggle" class="nav-icon"></a>
  </nav>
  <nav id="sub-nav">
    
      <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
    
    
      <a id="nav-search-btn" class="nav-icon popup-trigger" title="搜索"></a>
    
    
      <a id="nav-search-btn" class="nav-icon popup-trigger" title="搜索"></a>
    
  </nav>
</div>
<header id="header">
  
    <img fetchpriority="high" src="/images/banner.jpg" alt="数据库复习2">
  
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <div id="logo-wrap">
        
          
          
            <a href="/" id="logo">
              <h1>数据库复习2</h1>
            </a>
          
        
      </div>
      
        
        <h2 id="subtitle-wrap">
          
        </h2>
      
    </div>
  </div>
</header>

        <div id="content" class="outer">
          
            <aside id="sidebar">
  <div class="sidebar-wrap wow fadeInRight wrap-sticky">
    
      <div class="sidebar-toc-sidebar"><div class="sidebar-toc">
  <h3 class="toc-title">文章目录</h3>
  <div class="sidebar-toc-wrapper"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">
    樱春雪
    </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9A%E4%B9%89%E5%8A%9F%E8%83%BD2"><span class="toc-number">1.1.</span> <span class="toc-text">六.数据库定义功能2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%B4%A2%E5%BC%95%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.索引查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BB%84%E5%90%88%E7%B4%A2%E5%BC%95"><span class="toc-number">1.1.2.</span> <span class="toc-text">2.组合索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%A0%E9%99%A4"><span class="toc-number">1.1.3.</span> <span class="toc-text">3.索引的删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%B4%A2%E5%BC%95%E7%9A%84%E5%85%B6%E4%BB%96%E8%AF%B4%E6%98%8E"><span class="toc-number">1.1.4.</span> <span class="toc-text">4.索引的其他说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7%E7%9A%84%E5%9B%9B%E5%A4%A7%E4%BF%9D%E9%9A%9C%E6%8E%AA%E6%96%BD"><span class="toc-number">1.1.5.</span> <span class="toc-text">5.数据完整性的四大保障措施</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E4%B8%80%E4%B8%AA%E5%B8%A6%E6%9C%89%E5%94%AF%E4%B8%80%E6%80%A7%E5%A3%B0%E6%98%8E%E7%9A%84%E5%B1%9E%E6%80%A7%E4%B8%8A%E6%9C%89%E5%A4%9A%E5%B0%91%E4%B8%AANULL-%E2%80%93%E4%B8%8D%E9%99%90%E5%88%B6"><span class="toc-number">1.1.6.</span> <span class="toc-text">6.一个带有唯一性声明的属性上有多少个NULL  –不限制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-Foreign-key"><span class="toc-number">1.1.7.</span> <span class="toc-text">7.Foreign key</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E5%85%A8%E5%B1%80%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.1.8.</span> <span class="toc-text">8.全局约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E5%AF%B9%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%91%BD%E5%90%8D%E3%80%81%E6%92%A4%E9%94%80%E5%92%8C%E6%B7%BB%E5%8A%A0"><span class="toc-number">1.1.9.</span> <span class="toc-text">9.对约束的命名、撤销和添加</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E4%B8%8A%E7%BA%A6%E6%9D%9F%E7%9A%84%E6%92%A4%E9%94%80%E5%92%8C%E6%B7%BB%E5%8A%A0"><span class="toc-number">1.1.9.1.</span> <span class="toc-text">关系上约束的撤销和添加</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">1.1.10.</span> <span class="toc-text">10.触发器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E5%88%A0%E9%99%A4%E6%88%96%E8%80%85%E4%BF%AE%E6%94%B9%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.1.11.</span> <span class="toc-text">11.删除或者修改中的一个对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.1.12.</span> <span class="toc-text">12.数据库中的对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-%E7%BA%A6%E6%9D%9F%E6%A3%80%E6%9F%A5%E2%80%93%E5%BB%B6%E8%BF%9F%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.1.13.</span> <span class="toc-text">13.约束检查–延迟约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.14.</span> <span class="toc-text">14.用户自定义数据类型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83-%E4%BA%8B%E5%8A%A1%EF%BC%88%E6%A6%82%E5%BF%B5%E3%80%81%E6%80%A7%E8%B4%A8%E5%92%8C%E8%B0%83%E5%BA%A6"><span class="toc-number">1.2.</span> <span class="toc-text">七.事务（概念、性质和调度)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BA%8B%E5%8A%A1%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.事务概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BA%8B%E5%8A%A1%E7%89%B9%E5%BE%81"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.事务特征</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BA%8B%E5%8A%A1%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%BE"><span class="toc-number">1.2.3.</span> <span class="toc-text">3.事务生命周期图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%BA%8B%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%8F%8A%E5%85%B6%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.4.</span> <span class="toc-text">4.事务调度及其分类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E7%BB%84%E4%BA%8B%E5%8A%A1%E7%9A%84%E8%B0%83%E5%BA%A6%E5%BF%85%E9%A1%BB%E4%BF%9D%E8%AF%81"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">一组事务的调度必须保证</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%B2%E8%A1%8C%E8%B0%83%E5%BA%A6"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">串行调度</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B9%B6%E8%A1%8C%E8%B0%83%E5%BA%A6"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">并行调度</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E4%BA%8B%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">1.2.5.</span> <span class="toc-text">5.事务调度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%8F%AF%E6%81%A2%E5%A4%8D%E8%B0%83%E5%BA%A6"><span class="toc-number">1.2.6.</span> <span class="toc-text">6.可恢复调度</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8B%E7%89%A9%E7%9A%84%E6%81%A2%E5%A4%8D"><span class="toc-number">1.2.6.1.</span> <span class="toc-text">事物的恢复</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BA%A7%E8%81%94%E5%9B%9E%E6%BB%9A%EF%BC%9A"><span class="toc-number">1.2.6.2.</span> <span class="toc-text">级联回滚：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E6%97%A0%E7%BA%A7%E8%81%94%E5%9B%9E%E6%BB%9A-%E2%80%93%E4%B8%8D%E4%BC%9A%E5%8F%91%E7%94%9F%E7%BA%A7%E8%81%94%E5%9B%9E%E6%BB%9A%E7%9A%84%E8%B0%83%E5%BA%A6"><span class="toc-number">1.2.7.</span> <span class="toc-text">7.无级联回滚 –不会发生级联回滚的调度</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.7.1.</span> <span class="toc-text">定义</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-Write%E5%92%8CCommit"><span class="toc-number">1.2.8.</span> <span class="toc-text">8.Write和Commit</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Write%E5%8F%88%E7%A7%B0save%EF%BC%9A%E4%B8%B4%E6%97%B6%E6%80%A7"><span class="toc-number">1.2.8.1.</span> <span class="toc-text">Write又称save：临时性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Commit%EF%BC%9A%E6%B0%B8%E4%B9%85%E6%80%A7"><span class="toc-number">1.2.8.2.</span> <span class="toc-text">Commit：永久性</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E6%80%A7%E7%BA%A7%E5%88%AB"><span class="toc-number">1.2.9.</span> <span class="toc-text">9.事务隔离性级别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="toc-number">1.2.10.</span> <span class="toc-text">10.事务问题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%A2%E5%A4%B1%E4%BF%AE%E6%94%B9"><span class="toc-number">1.2.10.1.</span> <span class="toc-text">丢失修改</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%BB%E8%84%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.10.2.</span> <span class="toc-text">读脏数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%E8%AF%BB-%E2%80%93%E4%BF%AE%E6%94%B9%E5%85%B6%E4%BB%96%E4%BA%8B%E5%8A%A1%E8%AF%BB%E5%8F%96%E7%9A%84-update"><span class="toc-number">1.2.10.3.</span> <span class="toc-text">不能重复读  –修改其他事务读取的 update</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%91%E7%94%9F%E5%B9%BB%E8%B1%A1-%E2%80%93%E6%8F%92%E5%85%A5%E5%85%B6%E4%BB%96%E4%BA%8B%E5%8A%A1%E8%AF%BB%E7%9A%84-insert-delete"><span class="toc-number">1.2.10.4.</span> <span class="toc-text">发生幻象  –插入其他事务读的 insert&#x2F;delete</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E9%9A%94%E7%A6%BB%E6%80%A7%E7%BA%A7%E5%88%AB%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.11.</span> <span class="toc-text">11.隔离性级别的定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E6%95%85%E9%9A%9C%E6%81%A2%E5%A4%8D"><span class="toc-number">1.2.12.</span> <span class="toc-text">12.故障恢复</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.2.12.1.</span> <span class="toc-text">分页方法：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%96%B9%E6%B3%95-%E5%B9%BF%E6%B3%9B%E9%87%87%E7%94%A8"><span class="toc-number">1.2.12.2.</span> <span class="toc-text">日志方法(广泛采用)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-%E4%BA%8B%E5%8A%A1%E6%95%85%E9%9A%9C%E7%9A%84%E6%81%A2%E5%A4%8D%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.13.</span> <span class="toc-text">13.事务故障的恢复方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E5%BE%81%EF%BC%9A%E4%BA%8B%E5%8A%A1%E4%B8%8D%E8%83%BD%E6%89%A7%E8%A1%8C%E4%B8%8B%E5%8E%BB%EF%BC%8C%E6%9C%AA%E5%AE%8C%E6%88%90"><span class="toc-number">1.2.13.1.</span> <span class="toc-text">特征：事务不能执行下去，未完成</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-%E7%B3%BB%E7%BB%9F%E5%B4%A9%E6%BA%83%E6%95%85%E9%9A%9C%E7%9A%84%E6%81%A2%E5%A4%8D%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.14.</span> <span class="toc-text">14.系统崩溃故障的恢复方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-%E6%A3%80%E6%9F%A5%E7%82%B9-Checkpoint-%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.15.</span> <span class="toc-text">15.检查点(Checkpoint)概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-%E6%9C%89%E6%A3%80%E6%9F%A5%E7%82%B9%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%B4%A9%E6%BA%83%E6%95%85%E9%9A%9C%E6%81%A2%E5%A4%8D"><span class="toc-number">1.2.16.</span> <span class="toc-text">16.有检查点的系统崩溃故障恢复</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-%E5%A4%87%E4%BB%BD%E6%93%8D%E4%BD%9C-%E5%BA%94%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A3%81%E7%9B%98%E6%95%85%E9%9A%9C"><span class="toc-number">1.2.17.</span> <span class="toc-text">17.备份操作-应对数据库磁盘故障</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A3%81%E7%9B%98%E6%95%85%E9%9A%9C%E7%9A%84%E5%9B%9E%E5%A4%8D%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.18.</span> <span class="toc-text">18.数据库磁盘故障的回复方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AB-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E4%BF%9D%E9%9A%9C%E6%8A%80%E6%9C%AF"><span class="toc-number">1.3.</span> <span class="toc-text">八.数据库安全保障技术</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%BB%AA%E8%AE%BA"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.绪论</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%B8%89%E9%81%93%E9%98%B2%E7%BA%BF"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.三道防线</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.访问权限管理机制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%9C%89%E4%B8%89%E6%9D%A1%E5%87%86%E5%88%99%EF%BC%9A"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">权限管理有三条准则：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%AE%A1%E8%AE%A1"><span class="toc-number">1.3.4.</span> <span class="toc-text">4.审计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%BB%86%E5%88%99%E7%9A%84%E5%BB%BA%E7%AB%8B"><span class="toc-number">1.3.5.</span> <span class="toc-text">5.访问权限管理细则的建立</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%BB%86%E5%88%99%E7%9A%84%E5%AE%9E%E6%96%BD"><span class="toc-number">1.3.6.</span> <span class="toc-text">6.访问权限管理细则的实施</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E7%9A%84%E7%AE%A1%E7%90%86%E7%B2%92%E5%BA%A6"><span class="toc-number">1.3.7.</span> <span class="toc-text">7.数据库中访问权限的管理粒度</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E6%95%B0%E6%8D%AE%E4%B8%AD%E7%9A%84%E8%A1%A8"><span class="toc-number">1.3.7.1.</span> <span class="toc-text">对数据中的表</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E5%AD%98%E5%82%A8%E6%9D%83%E9%99%90%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.3.8.</span> <span class="toc-text">8.数据库中存储权限的数据结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%92%8C%E8%A7%92%E8%89%B2"><span class="toc-number">1.3.9.</span> <span class="toc-text">9.创建用户和角色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-%E6%8E%88%E6%9D%83"><span class="toc-number">1.3.10.</span> <span class="toc-text">10.授权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E6%94%B6%E5%9B%9E%E6%9D%83%E9%99%90"><span class="toc-number">1.3.11.</span> <span class="toc-text">11.收回权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E9%80%9A%E8%BF%87%E8%A7%86%E5%9B%BE%E6%9D%A5%E5%A2%9E%E5%BC%BA%E5%AE%89%E5%85%A8-%E2%80%93%E5%B0%86SELECT%E6%9D%83%E9%99%90%E7%BB%86%E5%8C%96%E5%88%B0%E5%88%97"><span class="toc-number">1.3.12.</span> <span class="toc-text">12.通过视图来增强安全 –将SELECT权限细化到列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-%E9%80%9A%E8%BF%87%E8%A7%86%E5%9B%BE%E6%9D%A5%E5%A2%9E%E5%BC%BA%E5%AE%89%E5%85%A8-%E2%80%93%E5%B0%86%E6%9D%83%E9%99%90%E7%BB%86%E5%8C%96%E5%88%B0%E8%A1%8C"><span class="toc-number">1.3.13.</span> <span class="toc-text">13.通过视图来增强安全 –将权限细化到行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%AE%89%E5%85%A8%E5%AE%A1%E8%AE%A1"><span class="toc-number">1.3.14.</span> <span class="toc-text">14.用触发器实现安全审计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%9A%84%E7%AE%80%E5%8C%96"><span class="toc-number">1.3.15.</span> <span class="toc-text">15.权限管理的简化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%9D-%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%8A%80%E6%9C%AF"><span class="toc-number">1.4.</span> <span class="toc-text">九.数据处理性能提升技术</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%BB%AA%E8%AE%BA-1"><span class="toc-number">1.4.1.</span> <span class="toc-text">1.绪论</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%80%A7%E8%83%BD%E5%BA%A6%E9%87%8F%E6%8C%87%E6%A0%87"><span class="toc-number">1.4.2.</span> <span class="toc-text">2.数据库性能度量指标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%85%85%E5%88%86%E6%8F%90%E9%AB%98%E6%95%B0%E6%8D%AE%E5%BA%93%E6%80%A7%E8%83%BD%E7%9A%84%E7%AD%96%E7%95%A5"><span class="toc-number">1.4.3.</span> <span class="toc-text">3.充分提高数据库性能的策略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%B0%86%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AE%E9%A2%91%E7%B9%81%E7%9A%84%E6%95%B0%E6%8D%AE%E6%94%BE%E5%9C%A8%E4%B8%AD%E5%A4%AE%E4%BD%8D%E7%BD%AE%EF%BC%8C%E6%8A%8A%E8%81%94%E7%B3%BB%E7%B4%A7%E5%AF%86%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%B4%E8%BF%91%E5%AD%98%E5%82%A8"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.将用户访问频繁的数据放在中央位置，把联系紧密的数据临近存储</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%8F%90%E9%AB%98%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.5.</span> <span class="toc-text">5.提高的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%85%B6%E4%B8%AD%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E6%9C%89%E5%85%B3%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.6.</span> <span class="toc-text">6.其中与数据库设计有关的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%87%8F%E5%B0%91%E6%97%A0%E6%95%88%E8%BF%90%E8%BE%93%E2%80%93%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">1.4.7.</span> <span class="toc-text">7.减少无效运输–创建索引</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-number">1.4.7.1.</span> <span class="toc-text">语法：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A3%E7%A1%AE%E7%9A%84%E7%94%A8%E7%B4%A2%E5%BC%95%EF%BC%9A"><span class="toc-number">1.4.7.2.</span> <span class="toc-text">正确的用索引：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E5%AF%B9%E4%BA%8E%E7%B4%A2%E5%BC%95%E7%9A%84%E6%80%9D%E8%80%83"><span class="toc-number">1.4.8.</span> <span class="toc-text">8.对于索引的思考</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E5%AF%B9%E4%BA%8E%E7%B4%A2%E5%BC%95%E7%9A%84%E6%80%9D%E8%80%83-2"><span class="toc-number">1.4.9.</span> <span class="toc-text">9.对于索引的思考 -2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-%E5%93%88%E5%B8%8C%E7%B4%A2%E5%BC%95"><span class="toc-number">1.4.10.</span> <span class="toc-text">10.哈希索引</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%82%E5%90%88%E4%BD%BF%E7%94%A8%E5%93%88%E5%B8%8C%E7%B4%A2%E5%BC%95%E7%9A%84%E8%A1%A8%E7%89%B9%E6%80%A7%EF%BC%9A"><span class="toc-number">1.4.10.1.</span> <span class="toc-text">适合使用哈希索引的表特性：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E9%80%82%E5%90%88%E4%BD%BF%E7%94%A8%E5%93%88%E5%B8%8C%E7%B4%A2%E5%BC%95%E7%9A%84%E8%A1%A8%E7%89%B9%E6%80%A7%EF%BC%9A"><span class="toc-number">1.4.10.2.</span> <span class="toc-text">不适合使用哈希索引的表特性：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E5%87%8F%E5%B0%91%E7%A3%81%E5%A4%B4%E7%A7%BB%E5%8A%A8%E8%B7%AF%E7%A8%8B-%E2%80%93-%E6%8A%8A%E5%85%B3%E7%B3%BB%E7%B4%A7%E5%AF%86%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%B4%E8%BF%91%E5%AD%98%E5%82%A8-%E2%80%93-%E8%81%9A%E7%B0%87-Clustering"><span class="toc-number">1.4.11.</span> <span class="toc-text">11.减少磁头移动路程 – 把关系紧密的数据临近存储 – 聚簇(Clustering)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E6%8F%90%E9%AB%98%E8%A1%A8%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE%E6%80%A7%E8%83%BD-%E2%80%93-%E8%BF%9E%E7%BB%AD%E7%A9%BA%E9%97%B4%E5%AD%98%E5%82%A8"><span class="toc-number">1.4.12.</span> <span class="toc-text">12.提高表数据访问性能 – 连续空间存储</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-%E8%AE%BF%E9%97%AE%E9%A2%91%E7%B9%81%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%86%8D%E4%B8%AD%E5%A4%AE%E4%BD%8D%E7%BD%AE"><span class="toc-number">1.4.13.</span> <span class="toc-text">13.访问频繁的数据存储再中央位置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.13.1.</span> <span class="toc-text">实现方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-%E6%8F%90%E9%AB%98%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%80%A7%E8%83%BD-%E2%80%93-%E7%BC%93%E5%AD%98"><span class="toc-number">1.4.14.</span> <span class="toc-text">14.提高数据处理性能 – 缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-%E6%8F%90%E9%AB%98%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%80%A7%E8%83%BD-%E2%80%93-%E5%B9%B6%E5%8F%91%E6%89%A7%E8%A1%8C"><span class="toc-number">1.4.15.</span> <span class="toc-text">15.提高数据处理性能 – 并发执行</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6"><span class="toc-number">1.4.15.1.</span> <span class="toc-text">并发控制</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-%E6%8F%90%E9%AB%98%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E8%A1%8C%E5%91%A2%E4%B8%AA-%E2%80%93-%E6%9F%A5%E8%AF%A2-%E4%BC%98%E5%8C%96"><span class="toc-number">1.4.16.</span> <span class="toc-text">16.提高数据处理行呢个 – 查询 优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-%E6%8F%90%E9%AB%98%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%80%A7%E8%83%BD-%E2%80%93-%E9%85%8D%E7%BD%AE%E5%8D%95%E7%8B%AC%E4%B8%93%E7%94%A8%E7%9A%84%E6%97%A5%E5%BF%97%E7%A3%81%E7%9B%98"><span class="toc-number">1.4.17.</span> <span class="toc-text">17.提高数据处理性能 – 配置单独专用的日志磁盘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-%E7%B4%A2%E5%BC%95-%E2%80%93-%E6%9C%80%E9%87%8D%E8%A6%81%E7%9A%84%E6%8A%80%E8%83%BD"><span class="toc-number">1.4.18.</span> <span class="toc-text">18.索引 – 最重要的技能</span></a></li></ol></li></ol></li></ol></div>
</div>
</div>
      <div class="sidebar-common-sidebar hidden"><div class="sidebar-author">
  <img data-src="/avatar/avatar.jpg" data-sizes="auto" alt="Ycx.Cc" class="lazyload">
  <div class="sidebar-author-name">Ycx.Cc</div>
  <div class="sidebar-description"></div>
</div>
<div class="sidebar-state">
  <div class="sidebar-state-article">
    <div>文章</div>
    <div class="sidebar-state-number">21</div>
  </div>
  <div class="sidebar-state-category">
    <div>分类</div>
    <div class="sidebar-state-number">7</div>
  </div>
  <div class="sidebar-state-tag">
    <div>标签</div>
    <div class="sidebar-state-number">16</div>
  </div>
</div>
<div class="sidebar-social">
  
    <div class=icon-github>
      <a href=https://github.com/Ycx6666 itemprop="url" target="_blank" aria-label="github"></a>
    </div>
  
</div>
<div class="sidebar-menu">
  
    <div class="sidebar-menu-link-wrap">
      <a class="sidebar-menu-link-dummy" href="/" aria-label="首页"></a>
      <span class="sidebar-menu-icon"></span>
      <div class="sidebar-menu-link">首页</div>
    </div>
  
    <div class="sidebar-menu-link-wrap">
      <a class="sidebar-menu-link-dummy" href="/archives" aria-label="归档"></a>
      <span class="sidebar-menu-icon"></span>
      <div class="sidebar-menu-link">归档</div>
    </div>
  
    <div class="sidebar-menu-link-wrap">
      <a class="sidebar-menu-link-dummy" href="/about" aria-label="关于"></a>
      <span class="sidebar-menu-icon"></span>
      <div class="sidebar-menu-link">关于</div>
    </div>
  
    <div class="sidebar-menu-link-wrap">
      <a class="sidebar-menu-link-dummy" href="/friend" aria-label="友链"></a>
      <span class="sidebar-menu-icon"></span>
      <div class="sidebar-menu-link">友链</div>
    </div>
  
</div>
</div>
    
    
      <div class="sidebar-btn-wrapper" style="position:static">
        <div class="sidebar-toc-btn current"></div>
        <div class="sidebar-common-btn"></div>
      </div>
    
  </div>

  
</aside>

          
          <section id="main"><article id="post-数据库复习2-md" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    <div class="article-meta">
      <div class="article-date wow slideInLeft">
  <a href="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/" class="article-date-link">
    <time datetime="2024-04-04T22:00:00.000Z" itemprop="datePublished">2024-04-04</time>
  </a>
</div>

      
  <div class="article-category wow slideInLeft">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
  </div>


    </div>
    <div class="hr-line"></div>
    

    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>#数据库复习(算是?)2</p>
<p align="center">
  <br>
  </p><h2 style="text-align:center;color:#F4E0EA">
    樱春雪
    </h2>
  <br>
  <br>
    <div style="text-align:center">
    <a target="_blank" rel="noopener" href="https://codeload.github.com/liangjingkanji/DrakeTyporaTheme/zip/refs/heads/master">湖南大学</a>
  | <a target="_blank" rel="noopener" href="https://theme.typora.io/theme/Drake/">软件工程</a>
  | <a target="_blank" rel="noopener" href="https://github.com/liangjingkanji/DrakeTyporaTheme/blob/master/issues.md">22级</a>
</div>
<br>
<br>
  <br>
<p></p>




<h3 id="六-数据库定义功能2"><a href="#六-数据库定义功能2" class="headerlink" title="六.数据库定义功能2"></a>六.数据库定义功能2</h3><h4 id="1-索引查询"><a href="#1-索引查询" class="headerlink" title="1.索引查询"></a>1.索引查询</h4><p><strong>定义</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> [<span class="keyword">unique</span>] [cluster] index 索引名</span><br><span class="line"><span class="keyword">on</span> 表名 (列名[<span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>] [,列名 <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>])</span><br></pre></td></tr></table></figure>

<ol>
<li>unique：唯一性索引，不允许表中不同的行在索引列上取相同值。若已经有相同值存在，则系统给出相关信息，不坚辞索引。系统拒绝未被唯一性的插入和更新</li>
<li>cluster：聚簇索引，表中元组按照索引项的值排序并物理的聚簇在一起(索引码到指针的则是非物理聚簇)。一个基本表上只能建一个聚簇索引。</li>
<li>asc&#x2F;desc:索引表中索引值的排序次序，缺省为asc。</li>
</ol>
<p>&#x3D;&#x3D;注意&#x3D;&#x3D;</p>
<blockquote>
<p>create table时指定的主键或者unique列，均会出发系统<strong>自动创建</strong>响应的索引用作重复性检查。</p>
</blockquote>
<p>![image-20240408165335994](<a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/Ycx6666">https://cdn.jsdelivr.net/Ycx6666</a> &#x2F; TyporaImage&#x2F;KahGvUJ961qYsMb.png)</p>
<h4 id="2-组合索引"><a href="#2-组合索引" class="headerlink" title="2.组合索引"></a>2.组合索引</h4><ul>
<li>建立在多个属性列上的索引</li>
<li>如果组合索引建立在A,B,C上，那他只对检索A,A+B,A+B+C列的查询起作用。</li>
</ul>
<p><img src="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/../../../Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/OBAinmqZMIeY3aS.png" alt="image-20240408165634068"></p>
<h4 id="3-索引的删除"><a href="#3-索引的删除" class="headerlink" title="3.索引的删除"></a>3.索引的删除</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> index 索引名</span><br></pre></td></tr></table></figure>

<blockquote>
<p>drop index 语句不适用于定义主键或者unique约束时系统自动创建的索引，他们必须通过删除约束来撤销</p>
</blockquote>
<h4 id="4-索引的其他说明"><a href="#4-索引的其他说明" class="headerlink" title="4.索引的其他说明"></a>4.索引的其他说明</h4><ul>
<li><p>可以动态地定义索引，即可以随时建立和删除索引</p>
</li>
<li><p>不允许用户在数据操作中引用索引。索引如何使用完全由系统决定，这支持了数据的物理独立性</p>
</li>
<li><p>应该在使用频率高的、经常用于连接的列上建索引</p>
</li>
<li><p>一个表上可建多个索引。索引可以提高查询效率，但索引过多耗费空间，且降低了插入、删除、更新的效率</p>
</li>
</ul>
<h4 id="5-数据完整性的四大保障措施"><a href="#5-数据完整性的四大保障措施" class="headerlink" title="5.数据完整性的四大保障措施"></a>5.数据完整性的四大保障措施</h4><ul>
<li>主键约束</li>
<li>外键约束</li>
<li>域约束</li>
<li>业务规则约束</li>
</ul>
<h4 id="6-一个带有唯一性声明的属性上有多少个NULL-–不限制"><a href="#6-一个带有唯一性声明的属性上有多少个NULL-–不限制" class="headerlink" title="6.一个带有唯一性声明的属性上有多少个NULL  –不限制"></a>6.一个带有唯一性声明的属性上有多少个NULL  –不限制</h4><h4 id="7-Foreign-key"><a href="#7-Foreign-key" class="headerlink" title="7.Foreign key"></a>7.Foreign key</h4><blockquote>
<p>作为主码的关系成为基本关系，作为外码的关系称为依赖关系</p>
</blockquote>
<p>&#x3D;&#x3D;删除基本关系元组&#x3D;&#x3D;</p>
<ul>
<li>RESTRICT方式</li>
</ul>
<p>​	只有当依赖关系中没有一个外码与要删除的基本关系的主码值相对应时，才可以删除该元组，否则系统拒绝此删除操作。</p>
<ul>
<li>CASCADE方式</li>
</ul>
<p>​	将依赖关系中所有的外码之与基本关系中要删除的主码值所对应的元组一起删除。</p>
<ul>
<li><p>SET NULL方式</p>
<p>删除基本关系中元组时，将依赖关系中与基本关系中被删主码值相对应的外码值置为空值。</p>
<p><img src="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/../../../Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/RAF6QjY3gpoyPXd.png" alt="image-20240408171436210"></p>
</li>
</ul>
<h4 id="8-全局约束"><a href="#8-全局约束" class="headerlink" title="8.全局约束"></a>8.全局约束</h4><blockquote>
<p>全局约束涉及多个属性见的或多个关系间的联系</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> SC</span><br><span class="line">(Ssharp   <span class="type">CHAR</span>(<span class="number">4</span>),</span><br><span class="line"> Csharp   <span class="type">CHAR</span>(<span class="number">4</span>),</span><br><span class="line"> GRADE   <span class="type">SMALLINT</span>,</span><br><span class="line"> primay key (Ssharp, Csharp),</span><br><span class="line"> <span class="keyword">check</span>(Ssharp <span class="keyword">in</span> (<span class="keyword">select</span> Ssharp <span class="keyword">from</span> S)),</span><br><span class="line"> <span class="keyword">check</span>(Csharp <span class="keyword">in</span> (<span class="keyword">select</span> Csharp <span class="keyword">from</span> C)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;如果S中删除元组，不会触发CHECK子句，只有对SC表的更新才会触发。&#x3D;&#x3D;</p>
<h4 id="9-对约束的命名、撤销和添加"><a href="#9-对约束的命名、撤销和添加" class="headerlink" title="9.对约束的命名、撤销和添加"></a>9.对约束的命名、撤销和添加</h4><p>命名：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constraint</span> 约束名 <span class="operator">&lt;</span>约束条件<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ssharp <span class="type">CHAR</span>(<span class="number">4</span>) <span class="keyword">constraint</span> S_PK <span class="keyword">primary</span> key</span><br></pre></td></tr></table></figure>

<h5 id="关系上约束的撤销和添加"><a href="#关系上约束的撤销和添加" class="headerlink" title="关系上约束的撤销和添加"></a>关系上约束的撤销和添加</h5><p>撤销用 <code>alter table...drop constraint... </code></p>
<p>添加用 <code>alter table...add constraint...</code></p>
<p><strong>示例：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> S <span class="keyword">drop</span> <span class="keyword">constraint</span> S_PK</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> SC <span class="keyword">add</span> <span class="keyword">constraint</span> SC_CHECK <span class="keyword">check</span> (Ssharp <span class="keyword">in</span> <span class="keyword">select</span> Ssharp <span class="keyword">from</span> S)</span><br></pre></td></tr></table></figure>

<h4 id="10-触发器"><a href="#10-触发器" class="headerlink" title="10.触发器"></a>10.触发器</h4><ul>
<li>表模式(Schema)的定义中，包含了主键、外键、域约束的定义；</li>
<li>业务规则约束用触发器来定义；</li>
<li>所有完整性约束在DBMS内部最终都用触发器来表示；</li>
<li>操作会先出发约束检查和处理，确认可以操作之后才完成操作。</li>
</ul>
<blockquote>
<p>&#x3D;&#x3D;BEFORE触发器&#x3D;&#x3D;在语句开始做任何增删改查之前就被触发。</p>
<p>&#x3D;&#x3D;AFTER触发器&#x3D;&#x3D;在语句结束后触发</p>
<p>&#x3D;&#x3D;INSTEAD OF触发器&#x3D;&#x3D;只能在定义视图上</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> trigger_insertEnroll</span><br><span class="line">BEFORE <span class="keyword">INSERT</span> <span class="keyword">ON</span> enroll</span><br><span class="line"><span class="keyword">REFERENCING</span> <span class="keyword">NEW</span> <span class="type">ROW</span> <span class="keyword">AS</span> <span class="keyword">new</span></span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">creditAll <span class="type">integer</span><span class="operator">/</span><span class="operator">/</span>定义一个整型变量</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(credit) <span class="keyword">INTO</span> credit <span class="keyword">FROM</span> course <span class="operator">/</span><span class="operator">/</span>给这个整型变量赋值</span><br><span class="line"><span class="keyword">WHERE</span> courseld <span class="keyword">IN</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> courseld <span class="keyword">FROM</span> enroll</span><br><span class="line">	<span class="keyword">WHERE</span> studentld<span class="operator">=</span><span class="variable">@new</span>.studentld</span><br><span class="line">	<span class="keyword">AND</span> semester<span class="operator">=</span><span class="variable">@new</span>.semester) 	</span><br><span class="line">	<span class="keyword">OR</span> couseld<span class="operator">=</span><span class="variable">@new</span>.courseld;</span><br><span class="line"><span class="keyword">WHEN</span>(creditAll<span class="operator">&gt;</span><span class="number">25</span>)<span class="operator">/</span><span class="operator">/</span>当大于<span class="number">25</span>分时，就会输出错误信息</span><br><span class="line">	raise_application_error(<span class="number">200</span>,<span class="string">&#x27;这个学期已经选修学分&#x27;</span><span class="operator">+</span><span class="variable">@creditAll</span>);</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>

<p>上面这个用于使用触发器实现每学期选课不超过25学分。</p>
<p><strong>DBMS内部，所有完整性约束，地使用触发器来表示</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WHEN</span> (<span class="keyword">NOT</span> EXIST <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> sudentNo <span class="operator">=</span> <span class="variable">@new</span>.studentNo <span class="keyword">OR</span>  <span class="keyword">NOT</span> EXIST <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> course <span class="keyword">WHERE</span> courseNo <span class="operator">=</span> <span class="variable">@new</span>.courseNo)</span><br><span class="line">           raise_application_error(“违背外键约束”);</span><br></pre></td></tr></table></figure>

<h4 id="11-删除或者修改中的一个对象"><a href="#11-删除或者修改中的一个对象" class="headerlink" title="11.删除或者修改中的一个对象"></a>11.删除或者修改中的一个对象</h4><blockquote>
<p>•<strong>DROP TABLE</strong> <strong>emp;</strong></p>
<p>•<strong>ALTER TABLE</strong> <strong>emp ……..;</strong></p>
<p>•<strong>DROP VIEW</strong> <strong>staff;</strong></p>
<p>•<strong>ALTER VIEW</strong> <strong>staff ……..;</strong></p>
<p>•<strong>DROP PROCEDURE</strong> <strong>add_enroll;</strong></p>
<p>•<strong>ALTER PROCEDURE</strong> <strong>add_enroll;</strong></p>
<p>•<strong>DROP TRIGGER</strong> <strong>staff_insert;</strong></p>
<p>•<strong>ALTER TRIGGER</strong> <strong>staff_insert;</strong></p>
</blockquote>
<h4 id="12-数据库中的对象"><a href="#12-数据库中的对象" class="headerlink" title="12.数据库中的对象"></a>12.数据库中的对象</h4><p>![image-20240408174225483](<a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/Ycx6666">https://cdn.jsdelivr.net/Ycx6666</a> &#x2F; TyporaImage&#x2F;image-20240408174225483.png)</p>
<p>e.g.</p>
<p>假定Booking表漏定义了外键(hotelNo, roomNo), 请针对往Booking表中添加记录，写一个触发器实现此这2个字段的引用完整性；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> Booking_trigger </span><br><span class="line">BEFORE <span class="keyword">INSERT</span> <span class="keyword">INTO</span> Booking</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> room_exists <span class="type">INT</span></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">INTO</span> room_exists </span><br><span class="line">	<span class="keyword">FROM</span> Room</span><br><span class="line">	<span class="keyword">WHERE</span> hotelNo<span class="operator">=</span>new.hotel <span class="keyword">AND</span> roomNo<span class="operator">=</span>new.roomNo</span><br><span class="line">	IF(room_exist<span class="operator">=</span><span class="number">0</span>) <span class="keyword">THEN</span></span><br><span class="line">		SINGAL <span class="keyword">SQLSTATE</span> <span class="string">&#x27;45000&#x27;</span></span><br><span class="line">		<span class="keyword">SET</span> MESSAGE_TEXT<span class="operator">=</span><span class="string">&#x27;外键引用错误&#x27;</span></span><br><span class="line">	<span class="keyword">END</span> IF</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>

<h4 id="13-约束检查–延迟约束"><a href="#13-约束检查–延迟约束" class="headerlink" title="13.约束检查–延迟约束"></a>13.约束检查–延迟约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deferred contraints</span><br></pre></td></tr></table></figure>

<h4 id="14-用户自定义数据类型"><a href="#14-用户自定义数据类型" class="headerlink" title="14.用户自定义数据类型"></a>14.用户自定义数据类型</h4><p>UDDT:</p>
<blockquote>
<p>保证数据一致性</p>
</blockquote>
<p>格式:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> domain 域名 数据类型</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> domain person<span class="operator">-</span>name <span class="type">char</span>(<span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<p><strong>类似于C语言中的</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">typedf ADDRESS_LIST&#123;</span><br><span class="line">	<span class="type">char</span> name[<span class="number">10</span>];</span><br><span class="line">	<span class="type">char</span> telephone[<span class="number">20</span>];</span><br><span class="line">	<span class="type">char</span> location[<span class="number">20</span>];</span><br><span class="line">&#125;;</span><br><span class="line">ADDRESS_LIST tom;</span><br></pre></td></tr></table></figure>

<h3 id="七-事务（概念、性质和调度"><a href="#七-事务（概念、性质和调度" class="headerlink" title="七.事务（概念、性质和调度)"></a>七.事务（概念、性质和调度)</h3><h4 id="1-事务概念"><a href="#1-事务概念" class="headerlink" title="1.事务概念"></a>1.事务概念</h4><blockquote>
<p>事务是由一系列操作的序列构成的程序执行单元，这些操作要么都做，要么都不做，是一个不可分割的工作单位.</p>
</blockquote>
<p>&#x3D;&#x3D;SQL中事务的定义&#x3D;&#x3D;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">事务以<span class="keyword">Begin</span> transaction开始，以<span class="keyword">Commit</span> transaction或 <span class="keyword">Rollback</span> transaction结束（回滚，也就是撤销已经执行的那部分操作）</span><br><span class="line">	<span class="keyword">Commit</span> transaction表示提交，事务正常结束</span><br><span class="line">	<span class="keyword">Rollback</span> transaction表示事务非正常结束，撤消事务已做的操作，回滚到事务开始时状态</span><br></pre></td></tr></table></figure>

<h4 id="2-事务特征"><a href="#2-事务特征" class="headerlink" title="2.事务特征"></a>2.事务特征</h4><p>&#x3D;&#x3D;要求:中间状态对外部不可见&#x3D;&#x3D;</p>
<p><strong>例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">TRANSACTION <span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">UPDATE</span> account <span class="keyword">SET</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">10000</span></span><br><span class="line">	<span class="keyword">WHERE</span> accountNo <span class="operator">=</span> <span class="string">&#x27;2008043101&#x27;</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">UPDATE</span> account <span class="keyword">SET</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">10000</span></span><br><span class="line">	<span class="keyword">WHERE</span> accountNo<span class="operator">=</span><span class="string">&#x27;2008043214&#x27;</span>;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;事务特性&#x3D;&#x3D; –一个DBMS支持事务的化，其所必须满足的特性</p>
<ul>
<li><strong>原子性</strong></li>
</ul>
<p>事务中包含的所有操作要么全做，要么全不做</p>
<p><strong>原子性由恢复机制实现</strong></p>
<ul>
<li><strong>一致性</strong></li>
</ul>
<p>在外部看来，数据库中的数据总是正确的,数据库的一致性状态<strong>由用户负责</strong>；</p>
<p>–数据正确性问题</p>
<p>-有故障时，数据会丢失或者残缺不全</p>
<p>-无故障时，因为数据阻止不合理，导致数据更新异常，冗余，数据不正确；</p>
<ul>
<li><strong>隔离性</strong></li>
</ul>
<p>– 系统必须保证事务不受其它并发执行事务的影响</p>
<p>– 对任何一对事务T1，T2，在T1看来，T2要么在T1开始之前已经结束，要么在T1完成之后再开始执行</p>
<p>– 隔离性通过<strong>并发控制机制</strong>实现</p>
<ul>
<li><strong>持久性</strong></li>
</ul>
<p>一个事务一旦提交之后，他对数据库的影响必须是永久的</p>
<p>系统发生故障不能改变事务的持久性</p>
<p>持久性通过恢复机制实现</p>
<blockquote>
<p>一个事务一旦提交了，即使随后发生故障，其结果不会在数据库中丢失</p>
</blockquote>
<h4 id="3-事务生命周期图"><a href="#3-事务生命周期图" class="headerlink" title="3.事务生命周期图"></a>3.事务生命周期图</h4><p><img src="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/../../../Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/NvYt7VwBHFJqjuG.png" alt="image-20240412101836367"></p>
<h4 id="4-事务调度及其分类"><a href="#4-事务调度及其分类" class="headerlink" title="4.事务调度及其分类"></a>4.事务调度及其分类</h4><blockquote>
<p>有多个事务需要执行时，这组事务对应的的所有操作的执行顺序称为对这组事务的一个调度，表示事务的指令在系统中执行的时间顺序</p>
</blockquote>
<h5 id="一组事务的调度必须保证"><a href="#一组事务的调度必须保证" class="headerlink" title="一组事务的调度必须保证"></a>一组事务的调度必须保证</h5><ul>
<li>包含了该组所有事务的操作指令</li>
<li>同一个事务中的指令，再调度中的先后顺序，同其在事务内部的先后顺序必须保持一致</li>
</ul>
<h5 id="串行调度"><a href="#串行调度" class="headerlink" title="串行调度"></a>串行调度</h5><ul>
<li>在串行调度中，属于同一事务的指令紧凑在一起</li>
<li>对于有n个事务的事务组，可以有n！个不同的串行调度</li>
</ul>
<h5 id="并行调度"><a href="#并行调度" class="headerlink" title="并行调度"></a>并行调度</h5><ul>
<li>在并行调度中，来自不同事物的指令可以交叉执行</li>
<li>当并行调度等价于某个串行调度时，则称他是正确的。</li>
</ul>
<h4 id="5-事务调度"><a href="#5-事务调度" class="headerlink" title="5.事务调度"></a>5.事务调度</h4><p><strong>并行和串行</strong></p>
<p>&#x3D;&#x3D;基本比较&#x3D;&#x3D;</p>
<ul>
<li>并行十五容易破坏数据库的一致性</li>
<li>串行事务效率低</li>
</ul>
<p>&#x3D;&#x3D;并行的优点&#x3D;&#x3D;</p>
<ul>
<li>一个事务由不同的步骤组成，所涉及的系统资源也不同。这些步骤可以并发执行，以提高系统的<strong>吞吐量</strong></li>
<li>系统中存在着周期不等的各种事务，串行会导致难于预测的时延。如果各个事务所涉及的是数据库的不同部分，采用并发会减少<strong>平均响应时间</strong>（例如事务操作的表各不相同）</li>
</ul>
<p>&#x3D;&#x3D;总结&#x3D;&#x3D;</p>
<blockquote>
<p>事务可以提高系统的吞吐量，也会减少响应时间</p>
</blockquote>
<h4 id="6-可恢复调度"><a href="#6-可恢复调度" class="headerlink" title="6.可恢复调度"></a>6.可恢复调度</h4><h5 id="事物的恢复"><a href="#事物的恢复" class="headerlink" title="事物的恢复"></a>事物的恢复</h5><blockquote>
<p><strong>事务的恢复</strong>：一个事务失败了，为保证事务的原子性，我们应该能够撤消（回滚）该事务对数据库已经造成的影响，如write过的数据项。如果有其它事务Tx读取了失败事务写入的数据，则该事务Tx也应该撤消（前提是Tx尚未commit，如果已经commited，那么就无法恢复，出现不一致）</p>
</blockquote>
<p><strong>注：</strong></p>
<blockquote>
<p>对于每对事物T1和T2，如果T2读取了T1所写的数据，则T1必须先于T2提交</p>
</blockquote>
<h5 id="级联回滚："><a href="#级联回滚：" class="headerlink" title="级联回滚："></a>级联回滚：</h5><p>应该避免级联回滚</p>
<h4 id="7-无级联回滚-–不会发生级联回滚的调度"><a href="#7-无级联回滚-–不会发生级联回滚的调度" class="headerlink" title="7.无级联回滚 –不会发生级联回滚的调度"></a>7.无级联回滚 –不会发生级联回滚的调度</h4><h5 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h5><blockquote>
<p>对于每对事物T1和T2，如果T2读取了T1所写的数据，则T1必须先于T2提交</p>
</blockquote>
<h4 id="8-Write和Commit"><a href="#8-Write和Commit" class="headerlink" title="8.Write和Commit"></a>8.Write和Commit</h4><h5 id="Write又称save：临时性"><a href="#Write又称save：临时性" class="headerlink" title="Write又称save：临时性"></a>Write又称save：临时性</h5><p>将数据项的值从内存中写入到数据库中，同时会备份好旧值，以便事务失败的时候需要回滚（将旧值写回该数据项），因此Write对数据库的修改是临时性的</p>
<h5 id="Commit：永久性"><a href="#Commit：永久性" class="headerlink" title="Commit：永久性"></a>Commit：永久性</h5><p>事务提交之后，会终止该事务，并且所有的备份旧值会被清除，事务对数据项的修改（Write）将因为commit的完成，实现由临时性变为永久性。</p>
<h4 id="9-事务隔离性级别"><a href="#9-事务隔离性级别" class="headerlink" title="9.事务隔离性级别"></a>9.事务隔离性级别</h4><p><strong>数据库事务的个隔离级别有4种，由高到低为</strong></p>
<ol>
<li>Serializable（可串行化)</li>
<li>Repeatable read (可重复读)</li>
<li>Read committed (读提交)</li>
<li>Read uncommitted (读未提交)</li>
</ol>
<p><strong>特点：</strong></p>
<ol>
<li>级别越低越容易出现不一致，性能越高</li>
<li>越高级越不容易出错，性能越低</li>
</ol>
<blockquote>
<p><strong>有些业务场景中允许将</strong>DBMS事务隔离性级别配置为非最高级（非可串行化），进而实现更高的性能</p>
</blockquote>
<h4 id="10-事务问题"><a href="#10-事务问题" class="headerlink" title="10.事务问题"></a>10.事务问题</h4><h5 id="丢失修改"><a href="#丢失修改" class="headerlink" title="丢失修改"></a>丢失修改</h5><blockquote>
<p>两个事务T1和T2读入同一数据并修改，T1提交的结果破坏了T2提交的结果，导致T2的修改丢失</p>
</blockquote>
<h5 id="读脏数据"><a href="#读脏数据" class="headerlink" title="读脏数据"></a>读脏数据</h5><blockquote>
<p>事务T1修改某一数据，并将其写回磁盘，事务T2读取同一数据后，T1由于某种原因被撤消，这时T1已修改过的数据恢复原值，T2读到的数据与数据库中数据不一致，则T2读到的数据就是脏数据</p>
</blockquote>
<h5 id="不能重复读-–修改其他事务读取的-update"><a href="#不能重复读-–修改其他事务读取的-update" class="headerlink" title="不能重复读  –修改其他事务读取的 update"></a>不能重复读  –修改其他事务读取的 update</h5><blockquote>
<p>事务T2读取某一数据后，事务T1对其做了修改，当T2再次读取该数据时，得到与前次不同的值，重复读导致不同值则表示出错，即不能重复读</p>
</blockquote>
<h5 id="发生幻象-–插入其他事务读的-insert-delete"><a href="#发生幻象-–插入其他事务读的-insert-delete" class="headerlink" title="发生幻象  –插入其他事务读的 insert&#x2F;delete"></a>发生幻象  –插入其他事务读的 insert&#x2F;delete</h5><blockquote>
<p>事务T2按一定条件读取了某些数据后，事务T1插入了一些满足这些条件的数据，当T2再次按相同条件读取数据时，发现多了一些记录</p>
</blockquote>
<h4 id="11-隔离性级别的定义"><a href="#11-隔离性级别的定义" class="headerlink" title="11.隔离性级别的定义"></a>11.隔离性级别的定义</h4><ul>
<li>serializable:一个调度的执行必须等价于一个串行调度的结果</li>
<li>repeatable read :只允许读取已提交的记录，并要求调度中，一个事务对同一记录的两次读取之间，不存在其他事务对该记录的更新</li>
<li>read committed： 只允许读取已提交的记录，但不要求可重复读</li>
<li>read uncommitted: 允许读取未提交的记录</li>
</ul>
<h4 id="12-故障恢复"><a href="#12-故障恢复" class="headerlink" title="12.故障恢复"></a>12.故障恢复</h4><ul>
<li>正常执行时的防备措施，为故障恢复做准备</li>
<li>在故障发生后的故障回复措施，保证事物的四个属性</li>
</ul>
<h5 id="分页方法："><a href="#分页方法：" class="headerlink" title="分页方法："></a>分页方法：</h5><ol>
<li>把要访问的数据页读入内存</li>
<li>数据处理</li>
<li>把修改了的数据页作为一个新页写回磁盘，注意不要覆盖旧页</li>
<li>完成第三步之后，在磁盘上删除过时了的旧页</li>
</ol>
<p><img src="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/../../../Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/ivgL5HD3FR6JplY.png" alt="image-20240412113027132"></p>
<p>&#x3D;&#x3D;优点&#x3D;&#x3D;:<strong>简单</strong></p>
<blockquote>
<p> <strong>故障恢复方法：如果因故障导致第3步没有完成，那么原数据页还在，就当该事物没有发生看待，保证了事物的原子性；</strong></p>
</blockquote>
<p>&#x3D;&#x3D;缺点&#x3D;&#x3D;:<strong>效率不高</strong></p>
<blockquote>
<p> <strong>原因是：磁头要在磁盘盘面上到处来回移动。因为磁头一会要读事物要处理的数据页，一会要去磁盘上的哪个地方找一个空闲页来写修改后的数据，还要回过头来删除旧页。</strong></p>
</blockquote>
<h5 id="日志方法-广泛采用"><a href="#日志方法-广泛采用" class="headerlink" title="日志方法(广泛采用)"></a>日志方法(广泛采用)</h5><p>数据库数据的特点：既要读，也要写</p>
<p>日志数据的特点：单调策略，只写不读</p>
<p><img src="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/../../../Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/et3RPIDspc2g1mu.png" alt="image-20240412113525506"></p>
<p><strong>将日志缓冲区的内容输出到日志磁盘</strong></p>
<p><strong>有两种同步约束：</strong></p>
<p>1）当数据库缓冲区中的某个内容要输出到数据库磁盘时，必须先把与其相关的日志缓冲区内容输出到日志磁盘(WAL ) ；</p>
<p><strong>数据库缓冲区中数据要输出到磁盘，是因为当要从磁盘中读数据到内存空间来进行处理时，必须先为其先腾出空间来；</strong></p>
<p><strong>2）当事务</strong> Ti 完成，遇到<Ti commit>记录时，要把日志缓冲区的内容输出到日志磁盘，以便保证事物的四个属性；</Ti></p>
<p>例子：<br><img src="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/../../../Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/Tw6XYeFWzxUNCEq.png" alt="image-20240412210837657"></p>
<h4 id="13-事务故障的恢复方法"><a href="#13-事务故障的恢复方法" class="headerlink" title="13.事务故障的恢复方法"></a>13.事务故障的恢复方法</h4><h5 id="特征：事务不能执行下去，未完成"><a href="#特征：事务不能执行下去，未完成" class="headerlink" title="特征：事务不能执行下去，未完成"></a>特征：事务不能执行下去，未完成</h5><p><strong>恢复方法：</strong></p>
<blockquote>
<p>恢复方法：执行回卷(Rollback)操作：当事物Ti要撤销时，反向扫描日志内容，对Ti的每项数据操作记录，执行undo(Ti) 操作，使用旧值恢复数据项的原有值，即撤销事务已做的数据操作；直至遇到<Ti start> 记录为止，然后放弃Ti ；</Ti></p>
</blockquote>
<h4 id="14-系统崩溃故障的恢复方法"><a href="#14-系统崩溃故障的恢复方法" class="headerlink" title="14.系统崩溃故障的恢复方法"></a>14.系统崩溃故障的恢复方法</h4><ol>
<li>重启数据库管理系统</li>
<li>从日志磁盘读取日志文件</li>
<li>反向扫描日志，从日志文件的结束位置开始反向扫描，对于在日志中没有&lt;Ti，commit&gt;的事务，执行回滚操作，使用旧值恢复数据项。做undo()处理。</li>
<li>然后从日志文件的开始位置向前扫描，对日志记录中含有 &lt;Ti,commit&gt;的事务，执行redo(Ti)操作，使用新值赋值数据库中的数据项， 保证事务的生效性。</li>
</ol>
<h4 id="15-检查点-Checkpoint-概念"><a href="#15-检查点-Checkpoint-概念" class="headerlink" title="15.检查点(Checkpoint)概念"></a>15.检查点(Checkpoint)概念</h4><p>做检查点的目的：</p>
<blockquote>
<p>加快系统崩溃故障恢复过程，基于如下观察</p>
</blockquote>
<ul>
<li>扫描整个日志文件很费时</li>
<li>对已经输出到了数据库磁盘的事务数据项没有必要做redo操作</li>
</ul>
<p><strong>周期性的做检查点</strong></p>
<ol>
<li>暂停当前所有活动事务</li>
<li>把日志缓冲区的所有日志记录输出带日志磁盘</li>
<li>把数据库缓冲区的所有修改输出到数据库磁盘</li>
<li>写一条&lt;checkpoint,&lt;当前活动事务的标识号列表&gt;&gt;日志记录到日志磁盘。</li>
</ol>
<h4 id="16-有检查点的系统崩溃故障恢复"><a href="#16-有检查点的系统崩溃故障恢复" class="headerlink" title="16.有检查点的系统崩溃故障恢复"></a>16.有检查点的系统崩溃故障恢复</h4><ol>
<li>从日志文件的结尾处反向扫描，直到遇到最近的<checkpoint>记录为止</checkpoint></li>
<li>对反向扫描中只有<Tistart>，而没有<Ti commit>的事务，执行回滚操作，做撤销处理</Ti></Tistart></li>
<li>从<checkpoint>开始向前扫描日志记录，对有<Ticommit>的事务，执行redo<Ti>操作。</Ti></Ticommit></checkpoint></li>
</ol>
<blockquote>
<p>没有检查点时，日志文件反向扫描要到起始位置。检查点加快了故障恢复过程，缩短了恢复时间；</p>
</blockquote>
<p>例子：</p>
<p><img src="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/../../../Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/hpQrRmZVwSf9g3t.png" alt="image-20240412212101160"></p>
<h4 id="17-备份操作-应对数据库磁盘故障"><a href="#17-备份操作-应对数据库磁盘故障" class="headerlink" title="17.备份操作-应对数据库磁盘故障"></a>17.备份操作-应对数据库磁盘故障</h4><p><strong>周期性地执行备份(dump) 操作，对磁盘数据库进行磁盘备份:</strong></p>
<p><strong>①不再接收客户事务请求，让当前所有活动事务执行完毕；</strong></p>
<p><strong>②输出日志缓冲区中的日志记录到日志磁盘中;</strong></p>
<p><strong>③输出数据库缓冲区中的缓冲数据到数据库磁盘中;</strong></p>
<p><strong>④把数据库磁盘中的数据库文件拷贝到另一个磁盘上；</strong></p>
<p><strong>⑤往日志磁盘中写入一条 <dump> 日志记录；</dump></strong></p>
<p>⑥<strong>接收客户事物请求，恢复正常处理；</strong></p>
<h4 id="18-数据库磁盘故障的回复方法"><a href="#18-数据库磁盘故障的回复方法" class="headerlink" title="18.数据库磁盘故障的回复方法"></a>18.数据库磁盘故障的回复方法</h4><p><strong>特征</strong></p>
<p>数据库数据全部丢失</p>
<p><strong>恢复方法</strong></p>
<ol>
<li>用最近备份的数据库磁盘替换掉失效的数据库磁盘</li>
<li>重启数据库管理系统</li>
<li>读日志文件，从文件末尾反向扫描直至<dump>记录；</dump></li>
<li>再顺向扫描日志记录，对有<Ticomit>记录的事务做redo(Ti)操作</Ticomit></li>
</ol>
<p>例子</p>
<p>![image-20240412212431459](<a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/Ycx6666">https://cdn.jsdelivr.net/Ycx6666</a> &#x2F; TyporaImage&#x2F;G2STxwgUXbnulhJ.png)</p>
<h3 id="八-数据库安全保障技术"><a href="#八-数据库安全保障技术" class="headerlink" title="八.数据库安全保障技术"></a>八.数据库安全保障技术</h3><h4 id="1-绪论"><a href="#1-绪论" class="headerlink" title="1.绪论"></a>1.绪论</h4><p>•企业的一切信息，活动，财富，都以数据来记载和体现，另外，所有用户的一切信息，活动，财富也都以数据来记载和体现；</p>
<p>•数据都存储在数据库的表中；</p>
<p>•数据要有安全性，就必须对每个访问数据库的用户标识其身份，明确其能访问的数据。对其能访问的数据，还要进一步明确能执行什么样的数据操作。只有这样，数据安全性才有保障。</p>
<p>•安全保障机制必须简单明了，而且完备，安全管理才不会出现漏洞，切实可靠。</p>
<h4 id="2-三道防线"><a href="#2-三道防线" class="headerlink" title="2.三道防线"></a>2.三道防线</h4><p><img src="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/../../../Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/fOUxbondpJmI1Fe.png" alt="image-20240412212710034"></p>
<h4 id="3-访问权限管理机制"><a href="#3-访问权限管理机制" class="headerlink" title="3.访问权限管理机制"></a>3.访问权限管理机制</h4><blockquote>
<p>用户登录后，要访问数据库中的每一个对象，还有权限要求，权限的授予可以用**&lt;授予者，对象，权限，被授予者&gt;**四元组来表示</p>
</blockquote>
<h5 id="权限管理有三条准则："><a href="#权限管理有三条准则：" class="headerlink" title="权限管理有三条准则："></a>权限管理有三条准则：</h5><ol>
<li>某个对象，其创建者拥有对其的<strong>全部权限</strong>;</li>
<li>一个用户可以将其拥有的权限<strong>授予给其他用户</strong>；</li>
<li>授权这可<strong>收回其授予出去的权限</strong>，权限的收回具有<strong>连带性</strong>。</li>
</ol>
<h4 id="4-审计"><a href="#4-审计" class="headerlink" title="4.审计"></a>4.审计</h4><p><strong>•数据库中的另一种安全机制是审计</strong>(Audit)<strong>。审计就如在公共场所安装摄像机，对登录进数据库的用户的一举一动都进行记录。一旦发现安全问题，就可调阅审计记录，查清事实真相。</strong></p>
<h4 id="5-访问权限管理细则的建立"><a href="#5-访问权限管理细则的建立" class="headerlink" title="5.访问权限管理细则的建立"></a>5.访问权限管理细则的建立</h4><blockquote>
<p><strong>设计人员</strong>定义数据库中的<strong>表模式</strong>，明确<strong>用户类型</strong>，明确每类用户的<strong>业务需求</strong>，并给出每项<strong>业务需求与表的映射关系</strong>。</p>
</blockquote>
<p>例如，对于大学教务数据库，用户类别有<strong>学生，老师，教管</strong>。</p>
<p>•<strong>学生类</strong>用户，其<strong>业务需求</strong>包括查阅可选课，选课，查阅成绩，查阅已修课程清单及成绩，已修学分等。</p>
<p>•<strong>老师类</strong>用户，其<strong>业务需求</strong>包括开课申请，获取选修学生名单，登录成绩，查阅自己的开课记录，统计自己年教学工作量等。</p>
<p>•<strong>教管类</strong>用户，<strong>业务需求</strong>：课程、学生、老师管理（包括添加，修改，删除)，给学生分班，查阅学生选课情况，查阅老师授课情况，成绩排名等。</p>
<h4 id="6-访问权限管理细则的实施"><a href="#6-访问权限管理细则的实施" class="headerlink" title="6.访问权限管理细则的实施"></a>6.访问权限管理细则的实施</h4><blockquote>
<p><strong>设计人员</strong>明确了<strong>用户类别</strong>，<strong>业务需求</strong>，<strong>映射关系</strong>，也就明确了每类用户<strong>要访问的对象</strong>，以及对其应具有的<strong>操作权限</strong>。</p>
</blockquote>
<blockquote>
<p><strong>数据库管理人员</strong>(DBA)的一项只要职责就是将设计在数据库中贯彻落实，也就是在数据库中创建表，创建用户类别，然后为每个用户类别指定其能访问的对象，明确其操作权限<strong>。</strong></p>
</blockquote>
<blockquote>
<p><strong>DBA的另一项职责是管理</strong>每类用户的实例，也就是在数据库中为每个用户创建一个账号，再确定其所属的用户类别。在SQL语言中，用户类别被叫做角色ROLE<strong>。</strong></p>
</blockquote>
<h4 id="7-数据库中访问权限的管理粒度"><a href="#7-数据库中访问权限的管理粒度" class="headerlink" title="7.数据库中访问权限的管理粒度"></a>7.数据库中访问权限的管理粒度</h4><h5 id="对数据中的表"><a href="#对数据中的表" class="headerlink" title="对数据中的表"></a>对数据中的表</h5><ul>
<li><p>读权限：SELECT 粒度：表</p>
</li>
<li><p>更新权限：INSERT,UPDATE. 粒度：表，还可以进一步<strong>指定到列</strong></p>
<p>DELETE; 粒度：表</p>
</li>
</ul>
<blockquote>
<p>•<strong>DBMS中的权限管理</strong>是<strong>粗放型的</strong>。粒度并没有细化到表中的<strong>行</strong>。对于SELECT权限，也没有细化到<strong>列</strong>。<strong>并不能满足业务需求</strong>。</p>
</blockquote>
<p><strong>•细化的其它辅助措施：视图，存储过程，应用程序；</strong></p>
<h4 id="8-数据库中存储权限的数据结构"><a href="#8-数据库中存储权限的数据结构" class="headerlink" title="8.数据库中存储权限的数据结构"></a>8.数据库中存储权限的数据结构</h4><p>![image-20240412213750895](<a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/Ycx6666">https://cdn.jsdelivr.net/Ycx6666</a> &#x2F; TyporaImage&#x2F;rBW76sXcJMNhzH3.png)</p>
<h4 id="9-创建用户和角色"><a href="#9-创建用户和角色" class="headerlink" title="9.创建用户和角色"></a>9.创建用户和角色</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> jj IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> ROLE teacher;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> jj;</span><br><span class="line"><span class="keyword">DROP</span> ROLE teacher;</span><br></pre></td></tr></table></figure>

<h4 id="10-授权"><a href="#10-授权" class="headerlink" title="10.授权"></a>10.授权</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span> <span class="keyword">ON</span> dept <span class="keyword">TO</span> PUBLIC;<span class="operator">/</span><span class="operator">/</span>给予所有用户(PUBLIC)访问部门表（dept）查询</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span> <span class="keyword">UPDATE</span>(salary) <span class="keyword">ON</span> Emp <span class="keyword">TO</span> Manager; <span class="operator">/</span><span class="operator">/</span>给予经理（Manager）角色对员工表（Emp）的查询（<span class="keyword">SELECT</span>）权限和更新（<span class="keyword">UPDATE</span>）员工工资（salary）的权限：</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> Proj <span class="keyword">TO</span> Diretor <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;<span class="operator">/</span><span class="operator">/</span>给予主管（Director）角色对项目表（Proj）的所有权限（<span class="keyword">ALL</span> PRIVILEGES），并且允许主管再授予这些权限给其他用户（<span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION）：</span><br></pre></td></tr></table></figure>

<h4 id="11-收回权限"><a href="#11-收回权限" class="headerlink" title="11.收回权限"></a>11.收回权限</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span> <span class="keyword">ON</span> dept <span class="keyword">FROM</span> PUBLIC;</span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> Emp <span class="keyword">FROM</span> Joe;</span><br></pre></td></tr></table></figure>

<h4 id="12-通过视图来增强安全-–将SELECT权限细化到列"><a href="#12-通过视图来增强安全-–将SELECT权限细化到列" class="headerlink" title="12.通过视图来增强安全 –将SELECT权限细化到列"></a>12.通过视图来增强安全 –将SELECT权限细化到列</h4><p>增强安全  —例如这里要隐隐藏员工表的birthdate和salary</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> EmpViw <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> eno,ename,...,<span class="keyword">FROM</span> emp.</span><br></pre></td></tr></table></figure>

<p>&#x2F;&#x2F;其实就是把视图当作一个表了</p>
<h4 id="13-通过视图来增强安全-–将权限细化到行"><a href="#13-通过视图来增强安全-–将权限细化到行" class="headerlink" title="13.通过视图来增强安全 –将权限细化到行"></a>13.通过视图来增强安全 –将权限细化到行</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> AccountTmp <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> eno,name,...,</span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">WHERE</span> dno<span class="operator">=</span><span class="string">&#x27;410&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>授权</strong></p>
<blockquote>
<p>GRANT SELECT ON AccountEmp TO AccountStaff;</p>
</blockquote>
<h4 id="14-用触发器实现安全审计"><a href="#14-用触发器实现安全审计" class="headerlink" title="14.用触发器实现安全审计"></a>14.用触发器实现安全审计</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> cheatingEmploee</span><br><span class="line">AFTER <span class="keyword">UPDATE</span> <span class="keyword">OF</span> salary <span class="keyword">ON</span> Emp</span><br><span class="line"><span class="keyword">REFERENCING</span> </span><br><span class="line">	<span class="keyword">OLD</span> <span class="type">ROW</span> <span class="keyword">AS</span> <span class="keyword">old</span></span><br><span class="line">	<span class="keyword">NEW</span> <span class="type">ROW</span> <span class="keyword">AS</span> <span class="keyword">new</span></span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">WHEN</span> (<span class="variable">@new</span>.salary<span class="operator">&gt;</span><span class="variable">@old</span>.salary<span class="operator">*</span><span class="number">1.1</span>)</span><br><span class="line">	<span class="keyword">INSERT</span> <span class="keyword">INTO</span> auditEmpSalary</span><br><span class="line"><span class="keyword">VALUES</span>(get_user_id(),get_connect_ip()),<span class="type">timestamp</span>(now()),<span class="variable">@new</span>.eno,<span class="variable">@new</span>.salary,<span class="variable">@old</span>.salary)</span><br></pre></td></tr></table></figure>

<h4 id="15-权限管理的简化"><a href="#15-权限管理的简化" class="headerlink" title="15.权限管理的简化"></a>15.权限管理的简化</h4><p>用户角色(ROLE)概念的提出</p>
<blockquote>
<p>不给某个用户授权，而是给角色授权，然后再将角色授予给某个用户</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">INSERT</span>(s_no, c_no, semester ) <span class="keyword">ON</span> enroll <span class="keyword">TO</span> student;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">UPDATE</span>(class_no, t_no) <span class="keyword">ON</span> enroll <span class="keyword">TO</span> administrator;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">UPDATE</span>(grade) <span class="keyword">ON</span> enroll <span class="keyword">TO</span> teacher;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span> <span class="keyword">ON</span> enroll <span class="keyword">TO</span> student, administrator, teacher;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">DELETE</span> <span class="keyword">ON</span> enroll <span class="keyword">TO</span> administrator, student;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>授权是，不要以用户身份授权，而应该以角色身份授权</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="built_in">CURRENT_ROLE</span> <span class="keyword">AS</span> assiant;</span><br><span class="line"><span class="keyword">GRANT</span> student <span class="keyword">TO</span> B GRANTED <span class="keyword">BY</span> <span class="built_in">CURRENT_ROLE</span>;</span><br></pre></td></tr></table></figure>

<h3 id="九-数据处理性能提升技术"><a href="#九-数据处理性能提升技术" class="headerlink" title="九.数据处理性能提升技术"></a>九.数据处理性能提升技术</h3><h4 id="1-绪论-1"><a href="#1-绪论-1" class="headerlink" title="1.绪论"></a>1.绪论</h4><p>•企业数据集中存储在数据库中，海量的数据。从海量的数据中查找和定位数据非常耗时费力。</p>
<p>•数据集中后，所有用户都要来访问数据库，出现很多用户同时访问情形，数据库服务器成了的负载中心，任务繁重。</p>
<p>•许多企业的系统因性能低下，超出用户容忍，受到非议与责难，影响企业形象。</p>
<p>•从挖掘和利用数据特性，机器特性，以及访问特性找出路。</p>
<p>•有效方法：数据分类&#x2F;排序、数据索引。</p>
<h4 id="2-数据库性能度量指标"><a href="#2-数据库性能度量指标" class="headerlink" title="2.数据库性能度量指标"></a>2.数据库性能度量指标</h4><ul>
<li><strong>事务吞吐量</strong>：单位时间能够处理的交易(事务)数量</li>
<li><strong>响应时间</strong>：完成单个交易所用的时间</li>
</ul>
<p>&#x3D;&#x3D;总指标：事务吞吐量&#x2F;响应时间&#x3D;&#x3D;</p>
<h4 id="3-充分提高数据库性能的策略"><a href="#3-充分提高数据库性能的策略" class="headerlink" title="3.充分提高数据库性能的策略"></a>3.充分提高数据库性能的策略</h4><p><strong>挖掘和利用</strong></p>
<ul>
<li>数据特性</li>
<li>硬件特性</li>
<li>数据访问特性</li>
</ul>
<h4 id="4-将用户访问频繁的数据放在中央位置，把联系紧密的数据临近存储"><a href="#4-将用户访问频繁的数据放在中央位置，把联系紧密的数据临近存储" class="headerlink" title="4.将用户访问频繁的数据放在中央位置，把联系紧密的数据临近存储"></a>4.将用户访问频繁的数据放在中央位置，把联系紧密的数据临近存储</h4><p>缓存：可实现磁盘访问的批量化</p>
<p>![image-20240412222023606](<a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/Ycx6666">https://cdn.jsdelivr.net/Ycx6666</a> &#x2F; TyporaImage&#x2F;21QBICuoWJmcVLK.png)</p>
<h4 id="5-提高的方法"><a href="#5-提高的方法" class="headerlink" title="5.提高的方法"></a>5.提高的方法</h4><ul>
<li><p>方法1: 排序;</p>
</li>
<li><p>方法2: 索引 （Tree索引和哈希索引）；</p>
</li>
<li><p>方法3: 连续的磁盘存储;</p>
</li>
<li><p>方法4: 分类、聚簇;</p>
</li>
<li><p>方法5: 内存缓冲;</p>
</li>
<li><p>方法6: 并发执行;</p>
</li>
<li><p>方法7: 查询优化;</p>
</li>
<li><p>方法8: 日志和数据分盘存储；</p>
</li>
</ul>
<h4 id="6-其中与数据库设计有关的方法"><a href="#6-其中与数据库设计有关的方法" class="headerlink" title="6.其中与数据库设计有关的方法"></a>6.其中与数据库设计有关的方法</h4><ul>
<li><p><strong>方法1: 排序;</strong></p>
</li>
<li><p><strong>方法2: 索引 ；</strong></p>
</li>
<li><p><strong>方法3: 连续的磁盘存储;</strong></p>
</li>
<li><p><strong>方法4: 分类、聚簇;</strong></p>
</li>
<li><p><strong>方法5: 内存缓冲;</strong></p>
</li>
<li><p><strong>方法8: 日志和数据分盘存储</strong></p>
</li>
</ul>
<blockquote>
<p>方法6“并发执行”和方法7“查询优化” ，完全封装在DBMS中，对数据库设计者DBA透明</p>
<p>其他的方法都需要数据库设计者DBA进行配置</p>
</blockquote>
<h4 id="7-减少无效运输–创建索引"><a href="#7-减少无效运输–创建索引" class="headerlink" title="7.减少无效运输–创建索引"></a>7.减少无效运输–创建索引</h4><h5 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX stu_index <span class="keyword">ON</span> student(d_no,name);</span><br></pre></td></tr></table></figure>

<h5 id="正确的用索引："><a href="#正确的用索引：" class="headerlink" title="正确的用索引："></a>正确的用索引：</h5><ul>
<li><p><strong>不对数据量少的表创建索引</strong>：因为l读磁盘是以页（16k)为单位进行，如果表数据量只有几个页，索引就没意义。就像很少几页的文章，再给它搞个目录页也没有意义；</p>
</li>
<li><p><strong>对字符串的字段，例如备注字段，不要创建索引，因为压缩比会小</strong></p>
</li>
<li><p>对经常作为查询条件、链接运算、排序、分组、UNION，DISTINCT字段，对其创建索引。</p>
</li>
</ul>
<h4 id="8-对于索引的思考"><a href="#8-对于索引的思考" class="headerlink" title="8.对于索引的思考"></a>8.对于索引的思考</h4><p><img src="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/../../../Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/zpMLw5nOPdD7UBv.png" alt="image-20240412224401802"></p>
<p>学号sno作为学生表student的主键，其结构为yyyyddssccnn，可以帮助快速定位和检索信息，其中：</p>
<ul>
<li>yyyy 代表年份，</li>
<li>dd 代表部门，</li>
<li>ss 代表专业代码，</li>
<li>cc 可能代表班级，</li>
<li>nn 代表个人编号。</li>
</ul>
<p>使用这样结构化的主键，我们可以通过WHERE子句中的LIKE操作符来进行模糊匹配查询，这些查询可以高效地利用主键索引（索引前缀匹配原则）：</p>
<ul>
<li><code>sno LIKE ‘20172601%’</code>：查询2017年部门编号为26，班级编号为01的所有学生。</li>
<li><code>sno LIKE ‘2017260102%’</code>：查询2017年部门编号为26，班级编号为01，个人编号以02开头的学生。</li>
<li><code>sno LIKE ‘_ _ _ _2601%’</code>：查询所有年份中部门编号为26，班级编号为01的学生。</li>
</ul>
<p>这些模糊查询大多数情况下能够有效地使用主键索引，特别是当查询模式定位在主键索引的开始部分时。</p>
<p>至于选课表enroll，其可能的主键为{sno, cno, semester}，也就是学号、课程号和学期联合起来确定一条独特的记录。关于这个主键是否设置差异或者是否需要建立多个索引，要基于以下考虑：</p>
<ul>
<li>索引选择的顺序应该基于查询条件中最常使用的字段顺序。</li>
<li>不同的索引顺序适用于不同的查询模式。</li>
<li>通常，选择最常用来过滤查询的字段作为索引的最前部，可以获得更好的性能。</li>
</ul>
<p>例如：</p>
<ul>
<li>如果查询经常过滤学期，然后是学号，最后是课程号，那{semester, sno, cno}可能是一个好的选择。</li>
<li>如果查询是基于学号过滤的，那{sno, …}开头的索引优先级会更高。</li>
</ul>
<p>一般情况下，不需要为表的所有可能的主键列组合创建索引，因为这样会造成维护成本高和写入性能下降。实践中，应该根据应用程序查询的实际模式来设计和实现所需要的索引。</p>
<h4 id="9-对于索引的思考-2"><a href="#9-对于索引的思考-2" class="headerlink" title="9.对于索引的思考 -2"></a>9.对于索引的思考 -2</h4><ul>
<li><p>传统概念上，索引是为了减少从磁盘到CPU的无效运输</p>
</li>
<li><p>数据还有从内存至CPU的运输，是否也要创建索引，减少从内存到CPU的无效运输？</p>
</li>
<li><p>数据从磁盘到内存，和由内存到CPU，有什么区别？</p>
</li>
<li><p>对于一个表的外键字段，创建索引时，由于很多行的外键字段值相同，该如何处理，以增大压缩比？</p>
</li>
<li><p>为了提升性能，索引虽对用户不可见，但是对应用程序可见。</p>
</li>
</ul>
<ol>
<li><strong>传统概念上的索引</strong>：确实，传统上认为创建索引的目的之一是为了减少从磁盘读取不必要数据的次数，从而减少I&#x2F;O操作的时间开销。索引可以帮助数据库快速定位到数据存储位置，减少磁盘的随机访问时间。</li>
<li><strong>内存至CPU的数据运输</strong>：现在的数据库系统很多都采用了内存数据库技术或者缓存技术，可以将频繁访问的数据保留在内存中。即使在内存中，索引仍然是有用的，因为它仍然可以减少不必要的数据比对操作，从而减少CPU处理时间。因此，索引不只是为了减少硬盘I&#x2F;O，同样也是为了优化内存中数据的访问效率。</li>
<li><strong>磁盘到内存，和内存到CPU的区别</strong>：磁盘到内存（Disk to RAM）主要是涉及磁盘I&#x2F;O操作，速度相对较慢，因为它需要机械移动(如传统HDD)或电子操作(如SSD)。内存到CPU（RAM to CPU）则是涉及将数据从内存传输到CPU，这个速度相对较快，因为都是电子操作，且内存速度通常比磁盘快几个数量级。</li>
<li><strong>外键字段的索引压缩</strong>：当外键字段的值相同时，可以采用如下方法优化：<ul>
<li><strong>选择合适的压缩级别</strong>：数据库如Oracle允许你为索引选择不同级别的压缩。选择合适的压缩级别可以在提高压缩比和查询性能之间做出平衡。</li>
<li><strong>使用部分索引</strong>：如果外键字段和查询模式允许，你可以创建只包括常用值或特定值的部分索引。</li>
<li><strong>Bitmap索引</strong>：对于有大量重复值的外键字段，如在数据仓库环境中，Bitmap索引可能更加有效，因为它们能高效地压缩相同值。</li>
<li><strong>使用较小的数据类型</strong>：如果外键的引用范围并不大，可以考虑使用较小的数据类型以减少每个索引项的大小。</li>
</ul>
</li>
<li><strong>索引的可见性</strong>：对用户来说，索引的创建和存在大多数情况下是透明的，即用户无需关心索引的细节，只需关心查询语句即可。然而，对于应用程序和数据库管理员来说，索引对性能的影响是非常明显的。合适的索引可以显著提高数据检索性能，不合适的索引则可能成为性能瓶颈。数据库管理员和开发者可以通过分析查询模式、执行计划等来决定是否创建或优化索引。</li>
</ol>
<h4 id="10-哈希索引"><a href="#10-哈希索引" class="headerlink" title="10.哈希索引"></a>10.哈希索引</h4><blockquote>
<p>当往表中添加一行记录时，对要哈希的字段计算哈希值，然后把该记录存储在磁盘空间中磁盘地址为该哈希值的地方。</p>
</blockquote>
<blockquote>
<p>查询数据行时，用户给出字段值，通过哈希计算，就可发现该记录的磁盘空间地址，直接读到对应的记录，不须要一行一行地去比对；</p>
</blockquote>
<h5 id="适合使用哈希索引的表特性："><a href="#适合使用哈希索引的表特性：" class="headerlink" title="适合使用哈希索引的表特性："></a>适合使用哈希索引的表特性：</h5><ol>
<li><strong>主要用于等值查询</strong>：哈希索引非常适合于那些主要涉及键值完全匹配查询的场景，因为哈希函数可以快速定位到数据行。</li>
<li><strong>键的分布相对均匀</strong>：当键值分布均匀时，哈希索引能提供较好的性能，因为它可以减少潜在的哈希冲突。</li>
<li><strong>表中数据变化不频繁</strong>：由于哈希索引不如B树索引高效地支持范围查询和顺序访问，因此更适合数据相对静态的表。</li>
</ol>
<h5 id="不适合使用哈希索引的表特性："><a href="#不适合使用哈希索引的表特性：" class="headerlink" title="不适合使用哈希索引的表特性："></a>不适合使用哈希索引的表特性：</h5><ol>
<li><strong>需要支持范围查询</strong>：哈希索引不适合于需要执行范围查询的情况，因为哈希函数的结果无法保证值之间的顺序关系。</li>
<li><strong>键的分布不均匀</strong>：如果表中的键值存在大量重复，或者分布不均匀，可能会导致大量哈希冲突，进而影响索引的性能。</li>
<li><strong>大量的写操作</strong>：哈希索引可能不太适合频繁进行插入、更新和删除操作的表，因为这些操作可能会导致哈希桶过载，需要重新哈希或频繁处理哈希冲突。</li>
<li><strong>需要支持前缀搜索或模式匹配</strong>：哈希索引不适合处理前缀搜索或模式匹配的查询，因为哈希函数的结果与数据值的局部模式无关。</li>
</ol>
<blockquote>
<p>总的来说，哈希索引在处理简单的等值查找时效率很高，但在其他方面较为局限。在选择是否使用哈希索引时，应当考虑表的数据特性和查询需求，以确保索引策略与数据使用模式相匹配。</p>
</blockquote>
<h4 id="11-减少磁头移动路程-–-把关系紧密的数据临近存储-–-聚簇-Clustering"><a href="#11-减少磁头移动路程-–-把关系紧密的数据临近存储-–-聚簇-Clustering" class="headerlink" title="11.减少磁头移动路程 – 把关系紧密的数据临近存储 – 聚簇(Clustering)"></a>11.减少磁头移动路程 – 把关系紧密的数据临近存储 – 聚簇(Clustering)</h4><blockquote>
<p>把关系非常紧密，但位于不同表中的行记录，在磁盘上临近存储。当它们做联接运算时，就能迅速得到结果；</p>
</blockquote>
<p><img src="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/../../../Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/a8DqAvzjMKwkurG.png" alt="image-20240412230022153"></p>
<h4 id="12-提高表数据访问性能-–-连续空间存储"><a href="#12-提高表数据访问性能-–-连续空间存储" class="headerlink" title="12.提高表数据访问性能 – 连续空间存储"></a>12.提高表数据访问性能 – 连续空间存储</h4><blockquote>
<p>对于表记录，如果<strong>连续地存储</strong>在一个磁道上，当读数据时，数据就可<strong>一个紧挨一个地读到</strong>，访问速度就会大大加快；</p>
<p>你的计算机使用一段时间后，感觉明显变慢，也是这个道理；</p>
<p>你可以做<strong>磁盘碎片整理</strong>，让每个文件的数据在磁盘上连续存储，这样就克服了<strong>磁头在盘面空间中到处来回移动</strong>，速度大大加快；</p>
</blockquote>
<p>![image-20240412230137895](<a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/Ycx6666">https://cdn.jsdelivr.net/Ycx6666</a> &#x2F; TyporaImage&#x2F;Lhbrt5HdCkEfeza.png)</p>
<h4 id="13-访问频繁的数据存储再中央位置"><a href="#13-访问频繁的数据存储再中央位置" class="headerlink" title="13.访问频繁的数据存储再中央位置"></a>13.访问频繁的数据存储再中央位置</h4><blockquote>
<p>对于<strong>访问频繁</strong>的数据表存储在<strong>中央位置</strong>，那么就可减少磁头移动的总路程；</p>
</blockquote>
<p><img src="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/../../../Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/VcMYiJgn14Z6fux.png" alt="image-20240412230237500"></p>
<h5 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>SPACE  basicdata DATAFILE ‘c:\oracle\data\basicdata.dbf’  SIZE <span class="number">1000</span>M;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> employee (</span><br><span class="line">eno <span class="type">CHAR</span>(<span class="number">5</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">ename <span class="type">VARCHAR</span>(<span class="number">30</span>),</span><br><span class="line"></span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (eno),</span><br><span class="line"><span class="keyword">FOREIGN</span> KEY (dno)  <span class="keyword">REFERENCES</span> Dept(dno),</span><br><span class="line"></span><br><span class="line">TABLESPACE  basicdata,</span><br><span class="line">                  STORAGE (<span class="keyword">INITIAL</span> <span class="number">100</span>M NEXT <span class="number">100</span>M)<span class="operator">/</span><span class="operator">/</span>初始<span class="number">100</span>M，追加<span class="number">100</span>M</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="14-提高数据处理性能-–-缓存"><a href="#14-提高数据处理性能-–-缓存" class="headerlink" title="14.提高数据处理性能 – 缓存"></a>14.提高数据处理性能 – 缓存</h4><blockquote>
<p>数据存在磁盘上可靠。访问磁盘也是这个道理，很费时间。<strong>缓存</strong>能使得<strong>批量读磁盘</strong>，<strong>批量写磁盘</strong>成为可能，<strong>可减少磁盘运输次数，也可减少磁头移动的总路程</strong>。其原理：<strong>规模效益</strong>。；</p>
</blockquote>
<h4 id="15-提高数据处理性能-–-并发执行"><a href="#15-提高数据处理性能-–-并发执行" class="headerlink" title="15.提高数据处理性能 – 并发执行"></a>15.提高数据处理性能 – 并发执行</h4><blockquote>
<p>并发处理在获得效率提升的同时，也引入了访问冲突的问题，导致数据的不一致和不正确</p>
</blockquote>
<p><img src="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/../../../Typora/Project/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%EF%BC%885-8%EF%BC%89.assets/8M2pqTyfjvOxJC5.png" alt="image-20240412230851792"></p>
<h5 id="并发控制"><a href="#并发控制" class="headerlink" title="并发控制"></a>并发控制</h5><ul>
<li><p><em><em>当前等待执行的事务集：{Ta}，正在执行的事务集:{T</em>x*}。任一T<em>c</em>属于{T*a</em>}，如果它和{T<em>x</em>}不冲突，那么就可调度执行T<em>c</em>。**</p>
</li>
<li><p><em><em>当服务器受理一个客户的事务请求T</em>c<em>时，如果它和{T</em>x*}不冲突，那么就执行它，并将其加进{T*x</em>}中。否则将它加进{T<em>a</em>}中。**</p>
</li>
<li><p><em><em>当一个事务执行完毕后，就将它从{T</em>x*}中剔除，然后对{T*a</em>}中的事务逐一检查，调度那些与更新后的{T<em>x</em>}无冲突的事务去执行，并将其从{T<em>a</em>}中移入到{T<em>x</em>}中。**</p>
</li>
</ul>
<h4 id="16-提高数据处理行呢个-–-查询-优化"><a href="#16-提高数据处理行呢个-–-查询-优化" class="headerlink" title="16.提高数据处理行呢个 – 查询 优化"></a>16.提高数据处理行呢个 – 查询 优化</h4><p>![image-20240412231121422](<a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/Ycx6666">https://cdn.jsdelivr.net/Ycx6666</a> &#x2F; TyporaImage&#x2F;uVZT3dlaSp5fNwA.png)</p>
<h4 id="17-提高数据处理性能-–-配置单独专用的日志磁盘"><a href="#17-提高数据处理性能-–-配置单独专用的日志磁盘" class="headerlink" title="17.提高数据处理性能 – 配置单独专用的日志磁盘"></a>17.提高数据处理性能 – 配置单独专用的日志磁盘</h4><blockquote>
<p>当配置单独的日志磁盘时，正常运行时，日志具有只写不读的特点，而且是递增，<strong>磁头可一个挨一个地写，不用来回移动，性能得到极大提高</strong>。</p>
</blockquote>
<h4 id="18-索引-–-最重要的技能"><a href="#18-索引-–-最重要的技能" class="headerlink" title="18.索引 – 最重要的技能"></a>18.索引 – 最重要的技能</h4><ul>
<li><p><strong>索引原理：压缩和排序。</strong></p>
</li>
<li><p><strong>增大压缩比的方法：分组；</strong></p>
</li>
<li><p><strong>分组，与排序相比，约束条件没有那么强！</strong></p>
</li>
<li><p><strong>例如，enroll表，以学号分组存储时，即一个学生的选课记录临近存储。与集合概念相比，分组提出了要求；</strong></p>
</li>
<li><p><strong>于是，对于enroll表，以学号字段创建索引时，一个学生只有一条索引记录，压缩比增大了n倍，n是一个学生的选课记录行数。</strong></p>
</li>
<li><p><strong>NOSQL中的key-Value模型中，value可以是一个集合&#x2F;表。</strong></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ycx6666.github.io/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A02-md/" data-id="clvgt32rd000yo8mc4jde2g0d" data-title="数据库复习2" class="article-share-link">分享</a>
      
      
      
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%80%BB%E7%BB%93/" rel="tag">总结</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>


    </footer>
  </div>
  
    
  <nav id="article-nav" class="wow fadeInUp">
    
      <div class="article-nav-link-wrap article-nav-link-left">
        
          
          
            <img data-src="/covers/infinity-3196617.jpg" data-sizes="auto" alt="数据库复习" class="lazyload">
          
        
        <a href="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A01-md/"></a>
        <div class="article-nav-caption">前一篇</div>
        <h3 class="article-nav-title">
          
            数据库复习
          
        </h3>
      </div>
    
    
    <div class="article-nav-link-wrap article-nav-link-right">
      
        
        
          <img data-src="/covers/infinity-14964584.jpg" data-sizes="auto" alt="数据库的一些问题" class="lazyload">
        
      
      <a href="/2024/04/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/"></a>
      <div class="article-nav-caption">后一篇</div>
      <h3 class="article-nav-title">
        
          数据库的一些问题
        
      </h3>
    </div>
    
  </nav>


  
</article>






</section>
          
        </div>
        <footer id="footer" class="wow fadeInUp">
  <div style="width: 100%; overflow: hidden">
    <div class="footer-line"></div>
  </div>
  <div class="outer">
    <div id="footer-info" class="inner">
      
        [object Object]
      
      <div>
        <span class="icon-copyright"></span>
        2020-2024
        <span class="footer-info-sep"></span>
        Ycx.Cc
      </div>
      
        <div>
          基于&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>&nbsp;
          Theme.<a href="https://github.com/D-Sketon/hexo-theme-reimu" target="_blank">Reimu</a>
        </div>
      
      
        <div>
          <span class="icon-brush"></span>
          52.7k
          &nbsp;|&nbsp;
          <span class="icon-coffee"></span>
          03:30
        </div>
      
      
        <div>
          <span class="icon-eye"></span>
          <span id="busuanzi_container_site_pv">总访问量&nbsp;<span id="busuanzi_value_site_pv"></span></span>
          &nbsp;|&nbsp;
          <span class="icon-user"></span>
          <span id="busuanzi_container_site_uv">总访客量&nbsp;<span id="busuanzi_value_site_uv"></span></span>
        </div>
      
    </div>
  </div>
</footer>

        <div class="sidebar-top">
          <img src="/images/taichi.png" height="50" width="50" />
          <div class="arrow-up"></div>
        </div>
        <div id="mask"></div>
      </div>
      <nav id="mobile-nav">
  <div class="sidebar-wrap">
    
      <div class="sidebar-toc-sidebar"><div class="sidebar-toc">
  <h3 class="toc-title">文章目录</h3>
  <div class="sidebar-toc-wrapper"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">
    樱春雪
    </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9A%E4%B9%89%E5%8A%9F%E8%83%BD2"><span class="toc-number">1.1.</span> <span class="toc-text">六.数据库定义功能2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%B4%A2%E5%BC%95%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.索引查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BB%84%E5%90%88%E7%B4%A2%E5%BC%95"><span class="toc-number">1.1.2.</span> <span class="toc-text">2.组合索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%A0%E9%99%A4"><span class="toc-number">1.1.3.</span> <span class="toc-text">3.索引的删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%B4%A2%E5%BC%95%E7%9A%84%E5%85%B6%E4%BB%96%E8%AF%B4%E6%98%8E"><span class="toc-number">1.1.4.</span> <span class="toc-text">4.索引的其他说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7%E7%9A%84%E5%9B%9B%E5%A4%A7%E4%BF%9D%E9%9A%9C%E6%8E%AA%E6%96%BD"><span class="toc-number">1.1.5.</span> <span class="toc-text">5.数据完整性的四大保障措施</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E4%B8%80%E4%B8%AA%E5%B8%A6%E6%9C%89%E5%94%AF%E4%B8%80%E6%80%A7%E5%A3%B0%E6%98%8E%E7%9A%84%E5%B1%9E%E6%80%A7%E4%B8%8A%E6%9C%89%E5%A4%9A%E5%B0%91%E4%B8%AANULL-%E2%80%93%E4%B8%8D%E9%99%90%E5%88%B6"><span class="toc-number">1.1.6.</span> <span class="toc-text">6.一个带有唯一性声明的属性上有多少个NULL  –不限制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-Foreign-key"><span class="toc-number">1.1.7.</span> <span class="toc-text">7.Foreign key</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E5%85%A8%E5%B1%80%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.1.8.</span> <span class="toc-text">8.全局约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E5%AF%B9%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%91%BD%E5%90%8D%E3%80%81%E6%92%A4%E9%94%80%E5%92%8C%E6%B7%BB%E5%8A%A0"><span class="toc-number">1.1.9.</span> <span class="toc-text">9.对约束的命名、撤销和添加</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E4%B8%8A%E7%BA%A6%E6%9D%9F%E7%9A%84%E6%92%A4%E9%94%80%E5%92%8C%E6%B7%BB%E5%8A%A0"><span class="toc-number">1.1.9.1.</span> <span class="toc-text">关系上约束的撤销和添加</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">1.1.10.</span> <span class="toc-text">10.触发器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E5%88%A0%E9%99%A4%E6%88%96%E8%80%85%E4%BF%AE%E6%94%B9%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.1.11.</span> <span class="toc-text">11.删除或者修改中的一个对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.1.12.</span> <span class="toc-text">12.数据库中的对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-%E7%BA%A6%E6%9D%9F%E6%A3%80%E6%9F%A5%E2%80%93%E5%BB%B6%E8%BF%9F%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.1.13.</span> <span class="toc-text">13.约束检查–延迟约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.14.</span> <span class="toc-text">14.用户自定义数据类型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83-%E4%BA%8B%E5%8A%A1%EF%BC%88%E6%A6%82%E5%BF%B5%E3%80%81%E6%80%A7%E8%B4%A8%E5%92%8C%E8%B0%83%E5%BA%A6"><span class="toc-number">1.2.</span> <span class="toc-text">七.事务（概念、性质和调度)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BA%8B%E5%8A%A1%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.事务概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BA%8B%E5%8A%A1%E7%89%B9%E5%BE%81"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.事务特征</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BA%8B%E5%8A%A1%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%BE"><span class="toc-number">1.2.3.</span> <span class="toc-text">3.事务生命周期图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%BA%8B%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%8F%8A%E5%85%B6%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.4.</span> <span class="toc-text">4.事务调度及其分类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E7%BB%84%E4%BA%8B%E5%8A%A1%E7%9A%84%E8%B0%83%E5%BA%A6%E5%BF%85%E9%A1%BB%E4%BF%9D%E8%AF%81"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">一组事务的调度必须保证</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%B2%E8%A1%8C%E8%B0%83%E5%BA%A6"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">串行调度</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B9%B6%E8%A1%8C%E8%B0%83%E5%BA%A6"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">并行调度</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E4%BA%8B%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">1.2.5.</span> <span class="toc-text">5.事务调度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%8F%AF%E6%81%A2%E5%A4%8D%E8%B0%83%E5%BA%A6"><span class="toc-number">1.2.6.</span> <span class="toc-text">6.可恢复调度</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8B%E7%89%A9%E7%9A%84%E6%81%A2%E5%A4%8D"><span class="toc-number">1.2.6.1.</span> <span class="toc-text">事物的恢复</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BA%A7%E8%81%94%E5%9B%9E%E6%BB%9A%EF%BC%9A"><span class="toc-number">1.2.6.2.</span> <span class="toc-text">级联回滚：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E6%97%A0%E7%BA%A7%E8%81%94%E5%9B%9E%E6%BB%9A-%E2%80%93%E4%B8%8D%E4%BC%9A%E5%8F%91%E7%94%9F%E7%BA%A7%E8%81%94%E5%9B%9E%E6%BB%9A%E7%9A%84%E8%B0%83%E5%BA%A6"><span class="toc-number">1.2.7.</span> <span class="toc-text">7.无级联回滚 –不会发生级联回滚的调度</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.7.1.</span> <span class="toc-text">定义</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-Write%E5%92%8CCommit"><span class="toc-number">1.2.8.</span> <span class="toc-text">8.Write和Commit</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Write%E5%8F%88%E7%A7%B0save%EF%BC%9A%E4%B8%B4%E6%97%B6%E6%80%A7"><span class="toc-number">1.2.8.1.</span> <span class="toc-text">Write又称save：临时性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Commit%EF%BC%9A%E6%B0%B8%E4%B9%85%E6%80%A7"><span class="toc-number">1.2.8.2.</span> <span class="toc-text">Commit：永久性</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E6%80%A7%E7%BA%A7%E5%88%AB"><span class="toc-number">1.2.9.</span> <span class="toc-text">9.事务隔离性级别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="toc-number">1.2.10.</span> <span class="toc-text">10.事务问题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%A2%E5%A4%B1%E4%BF%AE%E6%94%B9"><span class="toc-number">1.2.10.1.</span> <span class="toc-text">丢失修改</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%BB%E8%84%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.10.2.</span> <span class="toc-text">读脏数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%E8%AF%BB-%E2%80%93%E4%BF%AE%E6%94%B9%E5%85%B6%E4%BB%96%E4%BA%8B%E5%8A%A1%E8%AF%BB%E5%8F%96%E7%9A%84-update"><span class="toc-number">1.2.10.3.</span> <span class="toc-text">不能重复读  –修改其他事务读取的 update</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%91%E7%94%9F%E5%B9%BB%E8%B1%A1-%E2%80%93%E6%8F%92%E5%85%A5%E5%85%B6%E4%BB%96%E4%BA%8B%E5%8A%A1%E8%AF%BB%E7%9A%84-insert-delete"><span class="toc-number">1.2.10.4.</span> <span class="toc-text">发生幻象  –插入其他事务读的 insert&#x2F;delete</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E9%9A%94%E7%A6%BB%E6%80%A7%E7%BA%A7%E5%88%AB%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.11.</span> <span class="toc-text">11.隔离性级别的定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E6%95%85%E9%9A%9C%E6%81%A2%E5%A4%8D"><span class="toc-number">1.2.12.</span> <span class="toc-text">12.故障恢复</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.2.12.1.</span> <span class="toc-text">分页方法：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%96%B9%E6%B3%95-%E5%B9%BF%E6%B3%9B%E9%87%87%E7%94%A8"><span class="toc-number">1.2.12.2.</span> <span class="toc-text">日志方法(广泛采用)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-%E4%BA%8B%E5%8A%A1%E6%95%85%E9%9A%9C%E7%9A%84%E6%81%A2%E5%A4%8D%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.13.</span> <span class="toc-text">13.事务故障的恢复方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E5%BE%81%EF%BC%9A%E4%BA%8B%E5%8A%A1%E4%B8%8D%E8%83%BD%E6%89%A7%E8%A1%8C%E4%B8%8B%E5%8E%BB%EF%BC%8C%E6%9C%AA%E5%AE%8C%E6%88%90"><span class="toc-number">1.2.13.1.</span> <span class="toc-text">特征：事务不能执行下去，未完成</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-%E7%B3%BB%E7%BB%9F%E5%B4%A9%E6%BA%83%E6%95%85%E9%9A%9C%E7%9A%84%E6%81%A2%E5%A4%8D%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.14.</span> <span class="toc-text">14.系统崩溃故障的恢复方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-%E6%A3%80%E6%9F%A5%E7%82%B9-Checkpoint-%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.15.</span> <span class="toc-text">15.检查点(Checkpoint)概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-%E6%9C%89%E6%A3%80%E6%9F%A5%E7%82%B9%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%B4%A9%E6%BA%83%E6%95%85%E9%9A%9C%E6%81%A2%E5%A4%8D"><span class="toc-number">1.2.16.</span> <span class="toc-text">16.有检查点的系统崩溃故障恢复</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-%E5%A4%87%E4%BB%BD%E6%93%8D%E4%BD%9C-%E5%BA%94%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A3%81%E7%9B%98%E6%95%85%E9%9A%9C"><span class="toc-number">1.2.17.</span> <span class="toc-text">17.备份操作-应对数据库磁盘故障</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A3%81%E7%9B%98%E6%95%85%E9%9A%9C%E7%9A%84%E5%9B%9E%E5%A4%8D%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.18.</span> <span class="toc-text">18.数据库磁盘故障的回复方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AB-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E4%BF%9D%E9%9A%9C%E6%8A%80%E6%9C%AF"><span class="toc-number">1.3.</span> <span class="toc-text">八.数据库安全保障技术</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%BB%AA%E8%AE%BA"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.绪论</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%B8%89%E9%81%93%E9%98%B2%E7%BA%BF"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.三道防线</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.访问权限管理机制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%9C%89%E4%B8%89%E6%9D%A1%E5%87%86%E5%88%99%EF%BC%9A"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">权限管理有三条准则：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%AE%A1%E8%AE%A1"><span class="toc-number">1.3.4.</span> <span class="toc-text">4.审计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%BB%86%E5%88%99%E7%9A%84%E5%BB%BA%E7%AB%8B"><span class="toc-number">1.3.5.</span> <span class="toc-text">5.访问权限管理细则的建立</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%BB%86%E5%88%99%E7%9A%84%E5%AE%9E%E6%96%BD"><span class="toc-number">1.3.6.</span> <span class="toc-text">6.访问权限管理细则的实施</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E7%9A%84%E7%AE%A1%E7%90%86%E7%B2%92%E5%BA%A6"><span class="toc-number">1.3.7.</span> <span class="toc-text">7.数据库中访问权限的管理粒度</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E6%95%B0%E6%8D%AE%E4%B8%AD%E7%9A%84%E8%A1%A8"><span class="toc-number">1.3.7.1.</span> <span class="toc-text">对数据中的表</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E5%AD%98%E5%82%A8%E6%9D%83%E9%99%90%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.3.8.</span> <span class="toc-text">8.数据库中存储权限的数据结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%92%8C%E8%A7%92%E8%89%B2"><span class="toc-number">1.3.9.</span> <span class="toc-text">9.创建用户和角色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-%E6%8E%88%E6%9D%83"><span class="toc-number">1.3.10.</span> <span class="toc-text">10.授权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E6%94%B6%E5%9B%9E%E6%9D%83%E9%99%90"><span class="toc-number">1.3.11.</span> <span class="toc-text">11.收回权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E9%80%9A%E8%BF%87%E8%A7%86%E5%9B%BE%E6%9D%A5%E5%A2%9E%E5%BC%BA%E5%AE%89%E5%85%A8-%E2%80%93%E5%B0%86SELECT%E6%9D%83%E9%99%90%E7%BB%86%E5%8C%96%E5%88%B0%E5%88%97"><span class="toc-number">1.3.12.</span> <span class="toc-text">12.通过视图来增强安全 –将SELECT权限细化到列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-%E9%80%9A%E8%BF%87%E8%A7%86%E5%9B%BE%E6%9D%A5%E5%A2%9E%E5%BC%BA%E5%AE%89%E5%85%A8-%E2%80%93%E5%B0%86%E6%9D%83%E9%99%90%E7%BB%86%E5%8C%96%E5%88%B0%E8%A1%8C"><span class="toc-number">1.3.13.</span> <span class="toc-text">13.通过视图来增强安全 –将权限细化到行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%AE%89%E5%85%A8%E5%AE%A1%E8%AE%A1"><span class="toc-number">1.3.14.</span> <span class="toc-text">14.用触发器实现安全审计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%9A%84%E7%AE%80%E5%8C%96"><span class="toc-number">1.3.15.</span> <span class="toc-text">15.权限管理的简化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%9D-%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%8A%80%E6%9C%AF"><span class="toc-number">1.4.</span> <span class="toc-text">九.数据处理性能提升技术</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%BB%AA%E8%AE%BA-1"><span class="toc-number">1.4.1.</span> <span class="toc-text">1.绪论</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%80%A7%E8%83%BD%E5%BA%A6%E9%87%8F%E6%8C%87%E6%A0%87"><span class="toc-number">1.4.2.</span> <span class="toc-text">2.数据库性能度量指标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%85%85%E5%88%86%E6%8F%90%E9%AB%98%E6%95%B0%E6%8D%AE%E5%BA%93%E6%80%A7%E8%83%BD%E7%9A%84%E7%AD%96%E7%95%A5"><span class="toc-number">1.4.3.</span> <span class="toc-text">3.充分提高数据库性能的策略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%B0%86%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AE%E9%A2%91%E7%B9%81%E7%9A%84%E6%95%B0%E6%8D%AE%E6%94%BE%E5%9C%A8%E4%B8%AD%E5%A4%AE%E4%BD%8D%E7%BD%AE%EF%BC%8C%E6%8A%8A%E8%81%94%E7%B3%BB%E7%B4%A7%E5%AF%86%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%B4%E8%BF%91%E5%AD%98%E5%82%A8"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.将用户访问频繁的数据放在中央位置，把联系紧密的数据临近存储</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%8F%90%E9%AB%98%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.5.</span> <span class="toc-text">5.提高的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%85%B6%E4%B8%AD%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E6%9C%89%E5%85%B3%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.6.</span> <span class="toc-text">6.其中与数据库设计有关的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%87%8F%E5%B0%91%E6%97%A0%E6%95%88%E8%BF%90%E8%BE%93%E2%80%93%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">1.4.7.</span> <span class="toc-text">7.减少无效运输–创建索引</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-number">1.4.7.1.</span> <span class="toc-text">语法：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A3%E7%A1%AE%E7%9A%84%E7%94%A8%E7%B4%A2%E5%BC%95%EF%BC%9A"><span class="toc-number">1.4.7.2.</span> <span class="toc-text">正确的用索引：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E5%AF%B9%E4%BA%8E%E7%B4%A2%E5%BC%95%E7%9A%84%E6%80%9D%E8%80%83"><span class="toc-number">1.4.8.</span> <span class="toc-text">8.对于索引的思考</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E5%AF%B9%E4%BA%8E%E7%B4%A2%E5%BC%95%E7%9A%84%E6%80%9D%E8%80%83-2"><span class="toc-number">1.4.9.</span> <span class="toc-text">9.对于索引的思考 -2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-%E5%93%88%E5%B8%8C%E7%B4%A2%E5%BC%95"><span class="toc-number">1.4.10.</span> <span class="toc-text">10.哈希索引</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%82%E5%90%88%E4%BD%BF%E7%94%A8%E5%93%88%E5%B8%8C%E7%B4%A2%E5%BC%95%E7%9A%84%E8%A1%A8%E7%89%B9%E6%80%A7%EF%BC%9A"><span class="toc-number">1.4.10.1.</span> <span class="toc-text">适合使用哈希索引的表特性：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E9%80%82%E5%90%88%E4%BD%BF%E7%94%A8%E5%93%88%E5%B8%8C%E7%B4%A2%E5%BC%95%E7%9A%84%E8%A1%A8%E7%89%B9%E6%80%A7%EF%BC%9A"><span class="toc-number">1.4.10.2.</span> <span class="toc-text">不适合使用哈希索引的表特性：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E5%87%8F%E5%B0%91%E7%A3%81%E5%A4%B4%E7%A7%BB%E5%8A%A8%E8%B7%AF%E7%A8%8B-%E2%80%93-%E6%8A%8A%E5%85%B3%E7%B3%BB%E7%B4%A7%E5%AF%86%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%B4%E8%BF%91%E5%AD%98%E5%82%A8-%E2%80%93-%E8%81%9A%E7%B0%87-Clustering"><span class="toc-number">1.4.11.</span> <span class="toc-text">11.减少磁头移动路程 – 把关系紧密的数据临近存储 – 聚簇(Clustering)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E6%8F%90%E9%AB%98%E8%A1%A8%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE%E6%80%A7%E8%83%BD-%E2%80%93-%E8%BF%9E%E7%BB%AD%E7%A9%BA%E9%97%B4%E5%AD%98%E5%82%A8"><span class="toc-number">1.4.12.</span> <span class="toc-text">12.提高表数据访问性能 – 连续空间存储</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-%E8%AE%BF%E9%97%AE%E9%A2%91%E7%B9%81%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%86%8D%E4%B8%AD%E5%A4%AE%E4%BD%8D%E7%BD%AE"><span class="toc-number">1.4.13.</span> <span class="toc-text">13.访问频繁的数据存储再中央位置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.13.1.</span> <span class="toc-text">实现方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-%E6%8F%90%E9%AB%98%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%80%A7%E8%83%BD-%E2%80%93-%E7%BC%93%E5%AD%98"><span class="toc-number">1.4.14.</span> <span class="toc-text">14.提高数据处理性能 – 缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-%E6%8F%90%E9%AB%98%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%80%A7%E8%83%BD-%E2%80%93-%E5%B9%B6%E5%8F%91%E6%89%A7%E8%A1%8C"><span class="toc-number">1.4.15.</span> <span class="toc-text">15.提高数据处理性能 – 并发执行</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6"><span class="toc-number">1.4.15.1.</span> <span class="toc-text">并发控制</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-%E6%8F%90%E9%AB%98%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E8%A1%8C%E5%91%A2%E4%B8%AA-%E2%80%93-%E6%9F%A5%E8%AF%A2-%E4%BC%98%E5%8C%96"><span class="toc-number">1.4.16.</span> <span class="toc-text">16.提高数据处理行呢个 – 查询 优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-%E6%8F%90%E9%AB%98%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%80%A7%E8%83%BD-%E2%80%93-%E9%85%8D%E7%BD%AE%E5%8D%95%E7%8B%AC%E4%B8%93%E7%94%A8%E7%9A%84%E6%97%A5%E5%BF%97%E7%A3%81%E7%9B%98"><span class="toc-number">1.4.17.</span> <span class="toc-text">17.提高数据处理性能 – 配置单独专用的日志磁盘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-%E7%B4%A2%E5%BC%95-%E2%80%93-%E6%9C%80%E9%87%8D%E8%A6%81%E7%9A%84%E6%8A%80%E8%83%BD"><span class="toc-number">1.4.18.</span> <span class="toc-text">18.索引 – 最重要的技能</span></a></li></ol></li></ol></li></ol></div>
</div>
</div>
      <div class="sidebar-common-sidebar hidden"><div class="sidebar-author">
  <img data-src="/avatar/avatar.jpg" data-sizes="auto" alt="Ycx.Cc" class="lazyload">
  <div class="sidebar-author-name">Ycx.Cc</div>
  <div class="sidebar-description"></div>
</div>
<div class="sidebar-state">
  <div class="sidebar-state-article">
    <div>文章</div>
    <div class="sidebar-state-number">21</div>
  </div>
  <div class="sidebar-state-category">
    <div>分类</div>
    <div class="sidebar-state-number">7</div>
  </div>
  <div class="sidebar-state-tag">
    <div>标签</div>
    <div class="sidebar-state-number">16</div>
  </div>
</div>
<div class="sidebar-social">
  
    <div class=icon-github>
      <a href=https://github.com/Ycx6666 itemprop="url" target="_blank" aria-label="github"></a>
    </div>
  
</div>
<div class="sidebar-menu">
  
    <div class="sidebar-menu-link-wrap">
      <a class="sidebar-menu-link-dummy" href="/" aria-label="首页"></a>
      <span class="sidebar-menu-icon"></span>
      <div class="sidebar-menu-link">首页</div>
    </div>
  
    <div class="sidebar-menu-link-wrap">
      <a class="sidebar-menu-link-dummy" href="/archives" aria-label="归档"></a>
      <span class="sidebar-menu-icon"></span>
      <div class="sidebar-menu-link">归档</div>
    </div>
  
    <div class="sidebar-menu-link-wrap">
      <a class="sidebar-menu-link-dummy" href="/about" aria-label="关于"></a>
      <span class="sidebar-menu-icon"></span>
      <div class="sidebar-menu-link">关于</div>
    </div>
  
    <div class="sidebar-menu-link-wrap">
      <a class="sidebar-menu-link-dummy" href="/friend" aria-label="友链"></a>
      <span class="sidebar-menu-icon"></span>
      <div class="sidebar-menu-link">友链</div>
    </div>
  
</div>
</div>
    
  </div>
  
    <div class="sidebar-btn-wrapper">
      <div class="sidebar-toc-btn current"></div>
      <div class="sidebar-common-btn"></div>
    </div>
  
</nav>

    </div>
    <div class="site-search">
      <div class="reimu-popup popup">
        <div class="reimu-search">
          <span class="reimu-search-input-icon"></span>
          <div class="reimu-search-input" id="reimu-search-input"></div>
        </div>
        <div class="reimu-results">
          <div id="reimu-stats"></div>
          <div id="reimu-hits"></div>
          <div id="reimu-pagination" class="reimu-pagination"></div>
        </div>
        <span class="popup-btn-close"></span>
      </div>
    </div>
    
<script src="https://npm.webcache.cn/jquery@3.7.1/dist/jquery.min.js"></script>


<script src="https://npm.webcache.cn/lazysizes@5.3.2/lazysizes.min.js"></script>


<script src="https://npm.webcache.cn/clipboard@2.0.11/dist/clipboard.min.js"></script>



  
<script src="https://npm.webcache.cn/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" defer></script>



  
<script src="https://npm.webcache.cn/busuanzi@2.3.0/bsz.pure.mini.js" async></script>






<script src="/js/pjax_script.js" data-pjax></script>













  
<script src="/js/generator_search.js"></script>

  
<script src="https://npm.webcache.cn/instantsearch.js@4.56.1/dist/instantsearch.production.min.js"></script>




  
<script src="https://npm.webcache.cn/algoliasearch@4.17.1/dist/algoliasearch-lite.umd.js"></script>

  
<script src="https://npm.webcache.cn/instantsearch.js@4.56.1/dist/instantsearch.production.min.js"></script>

  
<script src="/js/algolia_search.js"></script>

  <script>
    var CONFIG = {
      root: '/',
      algolia: {
        applicationID: "",
        apiKey: "ac97a6a139ee23819efc64577e213254",
        indexName: "hexo",
        hits: {
          "per_page": parseInt("4")
        },
        labels: {
          "input_placeholder": "搜索.....",
          "hits_empty": "未发现与 「${query}」相关内容",
          "hits_stats": "找到${hits}条结果(用时 ${time} ms)"
        }
      }
    };
  </script>



  
<script src="https://npm.webcache.cn/mouse-firework@0.0.4/dist/index.umd.js"></script>

  <script>
    firework(JSON.parse('{"excludeElements":["a"],"particles":[{"shape":"circle","move":["emit"],"easing":"easeOutExpo","colors":["#ff5252","#ff7c7c","#ffafaf","#ffd0d0"],"number":20,"duration":[1200,1800],"shapeOptions":{"radius":[16,32],"alpha":[0.3,0.5]}},{"shape":"circle","move":["diffuse"],"easing":"easeOutExpo","colors":["#ff0000"],"number":1,"duration":[1200,1800],"shapeOptions":{"radius":20,"alpha":[0.2,0.5],"lineWidth":6}}]}'))
  </script>







<script src="/js/script.js"></script>



  <script>
    console.log(String.raw`%c 
 ______     ______     __     __    __     __  __    
/\  == \   /\  ___\   /\ \   /\ "-./  \   /\ \/\ \   
\ \  __<   \ \  __\   \ \ \  \ \ \-./\ \  \ \ \_\ \  
 \ \_\ \_\  \ \_____\  \ \_\  \ \_\ \ \_\  \ \_____\ 
  \/_/ /_/   \/_____/   \/_/   \/_/  \/_/   \/_____/ 
                                                  
`,'color: #ff5252;')
    console.log('%c Theme.Reimu v' + '0.1.0' + ' %c https://github.com/D-Sketon/hexo-theme-reimu ', 'color: white; background: #ff5252; padding:5px 0;', 'padding:4px;border:1px solid #ff5252;')
  </script>
  

  <!-- hexo injector body_end start -->
<script src="/js/insert_highlight.js" data-pjax></script>
<!-- hexo injector body_end end --></body>
  </html>

